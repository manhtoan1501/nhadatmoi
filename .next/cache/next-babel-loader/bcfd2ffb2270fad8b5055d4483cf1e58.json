{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\manh nhan\\\\Desktop\\\\Nhadatmoi\\\\pages\\\\_app.tsx\";\nvar __jsx = React.createElement;\nimport App from 'next/app';\nimport Url from 'url';\nimport React from 'react';\nimport nextCookie from \"next-cookies\";\nimport Router from \"next/router\";\nimport withGA from \"next-ga\";\nimport { googleAnalyticsCode } from '../constants';\nimport ErrorPage from \"next/error\";\nimport Validator from \"../modules/validator\";\nvar projectDetailPathname = '/chi-tiet-du-an.aspx';\nvar newLandDetailPathname = '/newland/project_detail.aspx';\nvar newLandAdSellLeasePathname = '/newland/properties_detail.aspx';\nvar adSellLeaseDetailPathname = '/chi-tiet-tin-rao.aspx';\nvar projectDetailNew = '/du-an/';\nvar adSellLeaseDetailNew = '/tin-rao/';\nvar projectCategory = '/du-an.aspx';\nvar adSellLeaseCategory = '/tin-rao.aspx';\n\nvar MyApp =\n/*#__PURE__*/\nfunction (_App) {\n  _inherits(MyApp, _App);\n\n  function MyApp() {\n    _classCallCheck(this, MyApp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MyApp).apply(this, arguments));\n  }\n\n  _createClass(MyApp, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          Component = _this$props.Component,\n          pageProps = _this$props.pageProps;\n\n      if (!Validator.isBlank(pageProps.statusCode) && pageProps.statusCode !== 200) {\n        return __jsx(ErrorPage, {\n          statusCode: pageProps.statusCode,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        });\n      }\n\n      debugger;\n      return __jsx(React.Fragment, null, __jsx(Component, _extends({}, pageProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var Component, ctx, urlObject, pathName, queryString, urlRedirect, _urlRedirect, _urlRedirect2, _urlRedirect3, _urlRedirect4, _urlRedirect5, pageProps, _nextCookie, user;\n\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              Component = _ref.Component, ctx = _ref.ctx;\n\n              if (ctx.asPath) {\n                urlObject = Url.parse(ctx.asPath);\n                pathName = urlObject.pathname;\n                queryString = urlObject.query;\n\n                if (pathName === '/tin-rao' || pathName === '/tin-rao/' || pathName === '/nha-dat-ban/') {\n                  console.log(\"chay voa tin giao\");\n                  urlRedirect = '/nha-dat-ban';\n                  ctx.res.writeHead(301, {\n                    Location: \"\".concat(urlRedirect)\n                  });\n                  ctx.res.end();\n                }\n\n                if (pathName === '/du-an' || pathName === '/du-an/' || pathName === '/du-an-bat-dong-san/') {\n                  console.log(\"chay vao du an\");\n                  _urlRedirect = '/du-an-bat-dong-san';\n                  ctx.res.writeHead(301, {\n                    Location: \"\".concat(_urlRedirect)\n                  });\n                  ctx.res.end();\n                }\n\n                if (queryString && (pathName === projectDetailPathname || pathName === newLandDetailPathname)) {\n                  _urlRedirect2 = '/';\n\n                  if (queryString.indexOf('project_id=') === -1) {\n                    queryString = queryString.replace('.html', '');\n                    _urlRedirect2 = projectDetailNew + queryString;\n                  }\n\n                  ctx.res.writeHead(301, {\n                    Location: \"\".concat(_urlRedirect2)\n                  });\n                  ctx.res.end();\n                }\n\n                if (queryString && (pathName === adSellLeaseDetailPathname || pathName === newLandAdSellLeasePathname)) {\n                  _urlRedirect3 = '/';\n\n                  if (queryString.indexOf('ad_sell_lease_id=') === -1) {\n                    queryString = queryString.replace('.html', '');\n                    _urlRedirect3 = adSellLeaseDetailNew + queryString;\n                  }\n\n                  ctx.res.writeHead(301, {\n                    Location: \"\".concat(_urlRedirect3)\n                  });\n                  ctx.res.end();\n                }\n\n                if (pathName === projectCategory) {\n                  console.log(\"chay vao du an 2\");\n                  _urlRedirect4 = '/du-an';\n                  ctx.res.writeHead(301, {\n                    Location: \"\".concat(_urlRedirect4)\n                  });\n                  ctx.res.end();\n                }\n\n                if (pathName === adSellLeaseCategory) {\n                  console.log(\"chay vao tin rao 2\");\n                  _urlRedirect5 = '/tin-rao';\n                  ctx.res.writeHead(301, {\n                    Location: \"\".concat(_urlRedirect5)\n                  });\n                  ctx.res.end();\n                }\n              }\n\n              pageProps = {\n                statusCode: 200\n              };\n\n              if (!Component.getInitialProps) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(Component.getInitialProps(ctx));\n\n            case 6:\n              pageProps = _context.sent;\n\n            case 7:\n              _nextCookie = nextCookie(ctx), user = _nextCookie.user;\n              pageProps = _Object$assign(pageProps, {\n                user: user\n              });\n              return _context.abrupt(\"return\", {\n                pageProps: pageProps\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }]);\n\n  return MyApp;\n}(App);\n\nexport default withGA(googleAnalyticsCode, Router)(MyApp);","map":{"version":3,"sources":["C:/Users/manh nhan/Desktop/Nhadatmoi/pages/_app.tsx"],"names":["App","Url","React","nextCookie","Router","withGA","googleAnalyticsCode","ErrorPage","Validator","projectDetailPathname","newLandDetailPathname","newLandAdSellLeasePathname","adSellLeaseDetailPathname","projectDetailNew","adSellLeaseDetailNew","projectCategory","adSellLeaseCategory","MyApp","props","Component","pageProps","isBlank","statusCode","ctx","asPath","urlObject","parse","pathName","pathname","queryString","query","console","log","urlRedirect","res","writeHead","Location","end","indexOf","replace","getInitialProps","user"],"mappings":"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","sourcesContent":["import App from 'next/app';\r\nimport Url from 'url';\r\nimport React from 'react'\r\nimport nextCookie from \"next-cookies\";\r\nimport Router from \"next/router\";\r\nimport withGA from \"next-ga\";\r\nimport {googleAnalyticsCode} from '../constants';\r\nimport ErrorPage from \"next/error\";\r\nimport Validator from \"../modules/validator\";\r\n\r\nconst projectDetailPathname = '/chi-tiet-du-an.aspx';\r\nconst newLandDetailPathname = '/newland/project_detail.aspx';\r\nconst newLandAdSellLeasePathname = '/newland/properties_detail.aspx';\r\nconst adSellLeaseDetailPathname = '/chi-tiet-tin-rao.aspx';\r\nconst projectDetailNew = '/du-an/';\r\nconst adSellLeaseDetailNew = '/tin-rao/';\r\nconst projectCategory = '/du-an.aspx';\r\nconst adSellLeaseCategory = '/tin-rao.aspx';\r\n\r\nclass MyApp extends App {\r\n  static async getInitialProps({Component, ctx}: any) {\r\n    if (ctx.asPath) {\r\n      let urlObject = Url.parse(ctx.asPath);\r\n      let pathName = urlObject.pathname;\r\n      let queryString = urlObject.query;\r\n      if (pathName === '/tin-rao' || pathName === '/tin-rao/' || pathName === '/nha-dat-ban/') {\r\n        console.log(\"chay voa tin giao\")\r\n        let urlRedirect = '/nha-dat-ban';\r\n        ctx.res.writeHead(301, {\r\n          Location: `${urlRedirect}`\r\n        });\r\n        ctx.res.end();\r\n      }\r\n      if (pathName === '/du-an' || pathName === '/du-an/' || pathName === '/du-an-bat-dong-san/') {\r\n        console.log(\"chay vao du an\")\r\n        let urlRedirect = '/du-an-bat-dong-san';\r\n        ctx.res.writeHead(301, {\r\n          Location: `${urlRedirect}`\r\n        });\r\n        ctx.res.end();\r\n      }\r\n\r\n      if (queryString && (pathName === projectDetailPathname || pathName === newLandDetailPathname)) {\r\n        let urlRedirect = '/';\r\n        if (queryString.indexOf('project_id=') === -1) {\r\n          queryString = queryString.replace('.html','');\r\n          urlRedirect = projectDetailNew + queryString;\r\n        }\r\n\r\n        ctx.res.writeHead(301, {\r\n          Location: `${urlRedirect}`\r\n        });\r\n        ctx.res.end();\r\n      }\r\n      if (queryString && (pathName === adSellLeaseDetailPathname || pathName === newLandAdSellLeasePathname)) {\r\n        let urlRedirect = '/';\r\n        if (queryString.indexOf('ad_sell_lease_id=') === -1) {\r\n          queryString = queryString.replace('.html','');\r\n          urlRedirect = adSellLeaseDetailNew + queryString;\r\n        }\r\n\r\n        ctx.res.writeHead(301, {\r\n          Location: `${urlRedirect}`\r\n        });\r\n        ctx.res.end();\r\n      }\r\n      \r\n      if (pathName === projectCategory) {\r\n        console.log(\"chay vao du an 2\")\r\n        let urlRedirect = '/du-an';\r\n        ctx.res.writeHead(301, {\r\n          Location: `${urlRedirect}`\r\n        });\r\n        ctx.res.end();\r\n      }\r\n      if (pathName === adSellLeaseCategory) {\r\n        console.log(\"chay vao tin rao 2\")\r\n        let urlRedirect = '/tin-rao';\r\n        ctx.res.writeHead(301, {\r\n          Location: `${urlRedirect}`\r\n        });\r\n        ctx.res.end();\r\n      }\r\n    }\r\n\r\n    let pageProps = {\r\n      statusCode: 200\r\n    };\r\n    if (Component.getInitialProps) {\r\n      pageProps = await Component.getInitialProps(ctx);\r\n    }\r\n    let {user} = nextCookie(ctx);\r\n    pageProps = Object.assign(pageProps,{user: user});\r\n    return { pageProps }\r\n  }\r\n\r\n  render() {\r\n    const { Component, pageProps} = this.props;\r\n    if (!Validator.isBlank(pageProps.statusCode) && pageProps.statusCode !== 200) {\r\n      return <ErrorPage statusCode={pageProps.statusCode}/>;\r\n    }\r\n    debugger\r\n    return (\r\n      <>\r\n        <Component {...pageProps}/>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withGA(googleAnalyticsCode, Router)(MyApp);\r\n\r\n"]},"metadata":{},"sourceType":"module"}