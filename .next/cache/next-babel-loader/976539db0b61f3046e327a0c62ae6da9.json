{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"C:\\\\Users\\\\manh nhan\\\\Desktop\\\\Nhadatmoi\\\\components\\\\LayeredNavigation\\\\MainSearchPage.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from 'react'; //Import Layout\n\nimport Layout from '../../components/Layout/Layout';\nimport processQueryUrl from \"../../modules/LayeredNavigation/processQueryUrl\"; //Import Components\n\nimport TitleBlock from \"../../components/Index/TitleBlock\";\nimport GridAdSellLeases from \"../../components/GridList/GridAdSellLeases\";\nimport GridProject from \"../../components/GridList/GridProject\";\nimport LayeredNavigation from \"../../components/LayeredNavigation/LayeredNavigation\";\nimport TopLayered from \"../../components/LayeredNavigation/TopLayered\";\nimport Grid from \"@material-ui/core/Grid\";\nimport SearchKeyword from \"../../components/Search/KeywordSlide\";\nimport PaginationPage from \"../../components/Pagination/Pagination\";\nimport LoadingPage from \"../../components/Display/LoadingPage\";\nimport StringProcess from \"./../../modules/stringProcess\";\nimport Validator from \"../../modules/validator\";\nimport CategoryContent from \"../../components/Search/CategoryContent\";\nimport Router, { useRouter } from 'next/router'; //Import SCSS\n\nimport \"../../assets/scss/style.scss\";\nimport { apolloClient } from \"../../utils\";\nimport { GET_AD_SELL_LEASES } from \"../../graphql/ad_sell_leases/queries\";\nimport EmptyPage from \"../../components/Display/EmptyPage\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport { useEffect } from \"react\";\nimport { GET_PROJECT_LIST } from \"../../graphql/project/queries\";\nimport { mainURL } from \"../../constants\";\nimport urlProcess from \"../../modules/urlProcess\";\n\n// @ts-ignore\nconst MainSearchPage = props => {\n  //Define Query Data\n  const [queryFilter, setQueryFilter] = React.useState(\"'{}'\");\n  const [totalNumber, setTotalNumber] = React.useState(0);\n  const [isNextPage, setNextPage] = React.useState(false);\n  const [isPrevPage, setPrevPage] = React.useState(false);\n  const [statusLoading, setStatusLoading] = React.useState(false); //Search Data AdsellLease\n\n  const [searchDataAdSellLease, setSearchDataAdSellLease] = React.useState([]); //Search Data Project\n\n  const [searchDataProject, setSearchDataProject] = React.useState([]); //Layered Navigation Data\n\n  const [dataLayeredNavigation, setDataLayeredNavigation] = React.useState(props.dataQuery);\n  const router = useRouter();\n\n  const updateLayeredNavigation = data => {\n    let valueString = getFilterString(data);\n    setDataLayeredNavigation(data);\n    setQueryFilter(valueString);\n    processRenderPage(1, null, valueString);\n    updateQueryString(data);\n  };\n\n  const updateQueryString = data => {\n    let queryString = processQueryUrl.processQueryUrl(data, props.typePage);\n    let slugAs = '/nha-dat-ban';\n    let urlProcess = '/nha-dat-ban';\n\n    if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\n      slugAs = '/du-an-bat-dong-san';\n      urlProcess = '/du-an-bat-dong-san';\n    }\n\n    if (data.slug && (props.typePage === 'ad-sell-lease-location' || props.typePage === 'ad-sell-lease-index')) {\n      urlProcess = urlProcess + '/[slug]';\n      slugAs = slugAs + '/' + data.slug;\n    }\n\n    if (queryString) {\n      slugAs = slugAs + '?' + queryString;\n    }\n\n    Router.push(urlProcess, slugAs, {\n      shallow: false\n    });\n  };\n\n  const getFilterString = filterQuery => {\n    let filterQueryProcess = processQueryUrl.processQueryString(filterQuery);\n\n    let valueString = _JSON$stringify(filterQueryProcess);\n\n    valueString = valueString.split('\"').join(\"'\");\n    return valueString;\n  }; //First Render Data\n\n\n  useEffect(() => {\n    let valueString = getFilterString(props.dataQuery);\n    processRenderPage(props.dataQuery.page, null, valueString);\n  }, [props.dataQuery]); //Process Render Page\n\n  const processRenderPage = (page, limit, filter) => {\n    setStatusLoading(true);\n    let queryFilterPrepare = filter ? filter : queryFilter;\n    let queryGraphQL = GET_AD_SELL_LEASES;\n\n    if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\n      queryGraphQL = GET_PROJECT_LIST;\n    }\n\n    apolloClient.query({\n      query: queryGraphQL,\n      variables: {\n        \"page\": dataLayeredNavigation.page,\n        \"limit\": dataLayeredNavigation.limit,\n        \"filter\": queryFilterPrepare\n      }\n    }).then(response => {\n      setStatusLoading(false);\n\n      if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\n        //Set Search Data\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.edges)) {\n          setSearchDataProject(response.data.projects.edges);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.edges)) {\n          setTotalNumber(response.data.projects.edges.length);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.pageInfo.hasNextPage)) {\n          setNextPage(response.data.projects.pageInfo.hasNextPage);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.pageInfo.hasPreviousPage)) {\n          setPrevPage(response.data.projects.pageInfo.hasPreviousPage);\n        } //If Blank\n\n\n        if (Validator.isBlank(response.data) || Validator.isBlank(response.data.projects.edges)) {\n          setSearchDataProject([]);\n          setTotalNumber(0);\n          setNextPage(false);\n          setPrevPage(false);\n        }\n      } else {\n        //Set Search Data\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\n          setSearchDataAdSellLease(response.data.adSellLeases.edges);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\n          setTotalNumber(response.data.adSellLeases.edges.length);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.pageInfo.hasNextPage)) {\n          setNextPage(response.data.adSellLeases.pageInfo.hasNextPage);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.pageInfo.hasPreviousPage)) {\n          setPrevPage(response.data.adSellLeases.pageInfo.hasPreviousPage);\n        } //If Blank\n\n\n        if (Validator.isBlank(response.data) || Validator.isBlank(response.data.adSellLeases.edges)) {\n          setSearchDataAdSellLease([]);\n          setTotalNumber(0);\n          setNextPage(false);\n          setPrevPage(false);\n        }\n      }\n    });\n  }; //Process Open Left Layered Navigation\n\n\n  const [state, setState] = React.useState({\n    top: false,\n    left: false,\n    bottom: false,\n    right: false\n  }); // @ts-ignore\n\n  const toggleDrawer = (side, open) => event => {\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n\n    setState(_objectSpread({}, state, {\n      [side]: open\n    }));\n  }; // @ts-ignore\n\n\n  const handleOpenPopup = () => {\n    setState(_objectSpread({}, state, {\n      [\"right\"]: true\n    }));\n  }; //Process Next Page, Previous Page\n\n\n  const onNextPage = () => {\n    let nextPage = Number(dataLayeredNavigation.page) + 1;\n    dataLayeredNavigation.page = nextPage;\n    setDataLayeredNavigation(dataLayeredNavigation);\n    processRenderPage(nextPage, null, null);\n    updateQueryString(dataLayeredNavigation);\n  };\n\n  const onPrevPage = () => {\n    let previousPage = Number(dataLayeredNavigation.page) - 1;\n\n    if (previousPage >= 1) {\n      dataLayeredNavigation.page = previousPage;\n      setDataLayeredNavigation(dataLayeredNavigation);\n      processRenderPage(previousPage, null, null);\n      updateQueryString(dataLayeredNavigation);\n    }\n  }; //Prepare and Filter Location\n\n\n  let locationItem = {\n    id: null,\n    name: null,\n    title: null,\n    slug: null,\n    seo_title: null,\n    description: null,\n    seo_description: null,\n    image: null\n  };\n\n  if (!Validator.isBlank(props.location.city) && !Validator.isBlank(props.location.city.id)) {\n    locationItem = _Object$assign(locationItem, props.location.city);\n  }\n\n  if (!Validator.isBlank(props.location.district) && !Validator.isBlank(props.location.district.id)) {\n    locationItem = _Object$assign(locationItem, props.location.district);\n  }\n\n  if (!Validator.isBlank(props.location.ward) && !Validator.isBlank(props.location.ward.id)) {\n    locationItem = _Object$assign(locationItem, props.location.ward);\n  } //Prepare page content\n\n\n  let titlePage = '';\n  let descriptionPage = '';\n  let heading = '';\n\n  if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\n    if (!Validator.isBlank(locationItem.name)) {\n      if (!Validator.isBlank(locationItem.seo_title)) {\n        titlePage = String(locationItem.seo_title);\n      } else {\n        titlePage = 'Dự án tại ' + locationItem.name + ' năm 2020';\n      }\n\n      if (!Validator.isBlank(locationItem.title)) {\n        heading = String(locationItem.title);\n      } else {\n        heading = 'Dự án tại ' + locationItem.name;\n      }\n\n      if (!Validator.isBlank(locationItem.seo_description)) {\n        descriptionPage = String(locationItem.seo_description);\n      } else {\n        descriptionPage = '';\n      }\n    } else {\n      titlePage = \"Tin tức dự án bất động sản toàn quốc đầy đủ, cập nhật nhất\";\n      heading = 'Tìm dự án';\n      descriptionPage = 'Nhà Đất Mới cập nhật liên tục tất cả dự án bất động sản trên toàn quốc với đầy đủ thông tin về quy mô, mức giá, tiến độ và đánh giá tiềm năng phát triển.';\n    }\n  } else {\n    if (!Validator.isBlank(locationItem.name)) {\n      if (!Validator.isBlank(locationItem.seo_title)) {\n        titlePage = String(locationItem.seo_title);\n      } else {\n        titlePage = 'Mua bán nhà tại ' + locationItem.name + ' năm 2020';\n      }\n\n      if (!Validator.isBlank(locationItem.title)) {\n        heading = String(locationItem.title);\n      } else {\n        heading = 'Mua bán nhà tại ' + locationItem.name;\n      }\n\n      if (!Validator.isBlank(locationItem.seo_description)) {\n        descriptionPage = String(locationItem.seo_description);\n      } else {\n        descriptionPage = '';\n      }\n    } else {\n      titlePage = \"Tin rao bất động sản uy tín nhất hiện nay - Nhà Đất Mới\";\n      heading = 'Tìm tin rao';\n      descriptionPage = 'Website đăng tin, mua bán bất động sản uy tín, nhanh chóng và hiệu quả. 100% tin rao trên toàn quốc đều được kiểm chứng và xác thực bởi hệ thống thông minh.';\n    }\n  }\n\n  let pathString = 'nha-dat-ban';\n\n  if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\n    pathString = 'du-an-bat-dong-san';\n  }\n\n  let canonicalTag = mainURL + '/' + pathString;\n\n  if (props.slug) {\n    canonicalTag = canonicalTag + '/' + props.slug;\n  }\n\n  let imageAvatar = 'https://static.nhadatmoi.net/default/home_default.jpg';\n\n  if (locationItem.image) {\n    let imageString = String(locationItem.image);\n    imageAvatar = urlProcess.processImageUrl(imageString, '');\n  }\n\n  const freshText = input => {\n    input = StringProcess.stripProperties(input, []);\n    input = StringProcess.stripTags(input, '');\n    input = input.replace(/&nbsp;/g, ' ');\n    return input;\n  };\n\n  const convertDescription = input => {\n    return input.replace(/&#(\\d+);/g, function (match, dec) {\n      return String.fromCharCode(dec);\n    });\n  };\n\n  if (locationItem.description && (descriptionPage === '' || !descriptionPage)) {\n    let textToReplace = String(locationItem.description);\n    descriptionPage = freshText(textToReplace);\n    descriptionPage = convertDescription(descriptionPage);\n    descriptionPage = StringProcess.truncateString(descriptionPage, 255, '');\n  } // @ts-ignore\n\n\n  return __jsx(Layout, _extends({\n    title: titlePage,\n    description: descriptionPage\n  }, props, {\n    image: imageAvatar,\n    canonical: canonicalTag,\n    path: pathString,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"body_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406\n    },\n    __self: this\n  }, __jsx(Drawer, {\n    anchor: \"right\",\n    open: state.right,\n    onClose: toggleDrawer('right', false),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410\n    },\n    __self: this\n  }, __jsx(LayeredNavigation, {\n    className: \"search_layered\",\n    updateLayeredNavigation: updateLayeredNavigation,\n    dataLayeredNavigation: dataLayeredNavigation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411\n    },\n    __self: this\n  })), __jsx(Grid, {\n    item: true,\n    className: \"search_body border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413\n    },\n    __self: this\n  }, __jsx(TitleBlock, {\n    title: heading,\n    description: \"Hiển thị \" + StringProcess.addCommas(Number(totalNumber).toString()) + \" kết quả\",\n    type: \"h1\",\n    path: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414\n    },\n    __self: this\n  }), __jsx(TopLayered, {\n    className: \"top_layered\",\n    onOpen: () => handleOpenPopup(),\n    updateLayeredNavigation: updateLayeredNavigation,\n    dataLayeredNavigation: dataLayeredNavigation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420\n    },\n    __self: this\n  }), statusLoading && __jsx(LoadingPage, {\n    className: \"loading_page\",\n    grid: {\n      xl: 3,\n      lg: 4,\n      md: 6,\n      sm: 6,\n      xs: 12\n    },\n    numberLimit: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423\n    },\n    __self: this\n  }), !statusLoading && searchDataAdSellLease.length == 0 && (props.typePage === 'ad-sell-lease-location' || props.typePage === 'ad-sell-lease-index') && __jsx(EmptyPage, {\n    title: \"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3 n\\xE0o\",\n    description: \"Vui l\\xF2ng s\\u1EED d\\u1EE5ng t\\u1EEB kh\\xF3a kh\\xE1c ho\\u1EB7c s\\u1EED d\\u1EE5ng b\\u1ED9 l\\u1ECDc n\\xE2ng cao \\u0111\\u1EC3 t\\xECm ki\\u1EBFm k\\u1EBFt qu\\u1EA3 ph\\xF9 h\\u1EE3p\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427\n    },\n    __self: this\n  }), !statusLoading && searchDataProject.length == 0 && props.typePage === 'project-index' && __jsx(EmptyPage, {\n    title: \"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3 n\\xE0o\",\n    description: \"Vui l\\xF2ng s\\u1EED d\\u1EE5ng t\\u1EEB kh\\xF3a kh\\xE1c ho\\u1EB7c s\\u1EED d\\u1EE5ng b\\u1ED9 l\\u1ECDc n\\xE2ng cao \\u0111\\u1EC3 t\\xECm ki\\u1EBFm k\\u1EBFt qu\\u1EA3 ph\\xF9 h\\u1EE3p\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431\n    },\n    __self: this\n  }), !statusLoading && searchDataAdSellLease.length > 0 && (props.typePage === 'ad-sell-lease-location' || props.typePage === 'ad-sell-lease-index') && __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435\n    },\n    __self: this\n  }, __jsx(GridAdSellLeases, {\n    grid: {\n      xl: 3,\n      lg: 4,\n      md: 6,\n      sm: 6,\n      xs: 12\n    },\n    gridData: searchDataAdSellLease,\n    className: \"grid__list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436\n    },\n    __self: this\n  }), __jsx(PaginationPage, {\n    isNextPage: isNextPage,\n    isPrevPage: isPrevPage,\n    currentPage: 2,\n    onNextPage: onNextPage,\n    onPrevPage: onPrevPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441\n    },\n    __self: this\n  })), !statusLoading && searchDataProject.length > 0 && props.typePage === 'project-index' && __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451\n    },\n    __self: this\n  }, __jsx(GridProject, {\n    grid: {\n      xl: 3,\n      lg: 4,\n      md: 6,\n      sm: 6,\n      xs: 12\n    },\n    gridData: searchDataProject,\n    className: \"grid__list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452\n    },\n    __self: this\n  }), __jsx(PaginationPage, {\n    isNextPage: isNextPage,\n    isPrevPage: isPrevPage,\n    currentPage: 2,\n    onNextPage: onNextPage,\n    onPrevPage: onPrevPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457\n    },\n    __self: this\n  })), __jsx(CategoryContent, {\n    description: locationItem.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466\n    },\n    __self: this\n  }), __jsx(SearchKeyword, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467\n    },\n    __self: this\n  }))));\n};\n\nexport default MainSearchPage;","map":{"version":3,"sources":["C:/Users/manh nhan/Desktop/Nhadatmoi/components/LayeredNavigation/MainSearchPage.tsx"],"names":["React","Layout","processQueryUrl","TitleBlock","GridAdSellLeases","GridProject","LayeredNavigation","TopLayered","Grid","SearchKeyword","PaginationPage","LoadingPage","StringProcess","Validator","CategoryContent","Router","useRouter","apolloClient","GET_AD_SELL_LEASES","EmptyPage","Drawer","useEffect","GET_PROJECT_LIST","mainURL","urlProcess","MainSearchPage","props","queryFilter","setQueryFilter","useState","totalNumber","setTotalNumber","isNextPage","setNextPage","isPrevPage","setPrevPage","statusLoading","setStatusLoading","searchDataAdSellLease","setSearchDataAdSellLease","searchDataProject","setSearchDataProject","dataLayeredNavigation","setDataLayeredNavigation","dataQuery","router","updateLayeredNavigation","data","valueString","getFilterString","processRenderPage","updateQueryString","queryString","typePage","slugAs","slug","push","shallow","filterQuery","filterQueryProcess","processQueryString","split","join","page","limit","filter","queryFilterPrepare","queryGraphQL","query","variables","then","response","isBlank","projects","edges","length","pageInfo","hasNextPage","hasPreviousPage","adSellLeases","state","setState","top","left","bottom","right","toggleDrawer","side","open","event","type","key","handleOpenPopup","onNextPage","nextPage","Number","onPrevPage","previousPage","locationItem","id","name","title","seo_title","description","seo_description","image","location","city","district","ward","titlePage","descriptionPage","heading","String","pathString","canonicalTag","imageAvatar","imageString","processImageUrl","freshText","input","stripProperties","stripTags","replace","convertDescription","match","dec","fromCharCode","textToReplace","truncateString","addCommas","toString","xl","lg","md","sm","xs"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\n//Import Layout\r\nimport Layout from '../../components/Layout/Layout';\r\nimport processQueryUrl from \"../../modules/LayeredNavigation/processQueryUrl\";\r\n//Import Components\r\nimport TitleBlock from \"../../components/Index/TitleBlock\";\r\nimport GridAdSellLeases from \"../../components/GridList/GridAdSellLeases\";\r\nimport GridProject from \"../../components/GridList/GridProject\";\r\nimport LayeredNavigation from \"../../components/LayeredNavigation/LayeredNavigation\";\r\nimport TopLayered from \"../../components/LayeredNavigation/TopLayered\";\r\nimport {NextPage} from 'next';\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport SearchKeyword from \"../../components/Search/KeywordSlide\";\r\nimport PaginationPage from \"../../components/Pagination/Pagination\";\r\nimport LoadingPage from \"../../components/Display/LoadingPage\";\r\nimport StringProcess from \"./../../modules/stringProcess\";\r\nimport Validator from \"../../modules/validator\";\r\nimport CategoryContent from \"../../components/Search/CategoryContent\";\r\nimport Router, {useRouter} from 'next/router';\r\n//Import SCSS\r\nimport \"../../assets/scss/style.scss\";\r\nimport {apolloClient} from \"../../utils\";\r\nimport {GET_AD_SELL_LEASES} from \"../../graphql/ad_sell_leases/queries\";\r\nimport EmptyPage from \"../../components/Display/EmptyPage\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport {useEffect} from \"react\";\r\nimport {GET_PROJECT_LIST} from \"../../graphql/project/queries\";\r\nimport {mainURL} from \"../../constants\";\r\nimport urlProcess from \"../../modules/urlProcess\";\r\n\r\ninterface AdSellLeasesListProps {\r\n  node: {\r\n    title: string,\r\n    description: string,\r\n    slug: string,\r\n    created_at: string,\r\n    updated_at: string,\r\n    price: {\r\n      unit: string\r\n      value: string\r\n    },\r\n    avatar: {\r\n      alt_text: string\r\n      src: string\r\n      description: string\r\n    },\r\n    address: {\r\n      text: string,\r\n      ward: string,\r\n      district: string,\r\n      city: string\r\n    },\r\n    area: {\r\n      unit: string\r\n      value: string\r\n    }\r\n  }\r\n}\r\n\r\ninterface LocationItemProp {\r\n  id: string|null;\r\n  name: string|null;\r\n  title: string|null;\r\n  slug: string|null;\r\n  seo_title: string|null;\r\n  seo_description: string|null;\r\n  image: string|null;\r\n}\r\n\r\ninterface SearchPageProp {\r\n  location: {\r\n    city: LocationItemProp;\r\n    ward: LocationItemProp;\r\n    district: LocationItemProp;\r\n  },\r\n  dataQuery: DataQueryProp,\r\n  slug: string,\r\n  typePage: string\r\n}\r\n\r\ninterface DataQueryProp {\r\n  city: string|null,\r\n  district: string|null,\r\n  ward: string|null,\r\n  home_direction: string|null,\r\n  price_range: RangeValue,\r\n  area_range: RangeValue,\r\n  bed_room_number: RangeValue,\r\n  title: string|null,\r\n  name: string|null,\r\n  page: number|null,\r\n  limit: number|null,\r\n  slug: string|null,\r\n  sort_by: AdSellLeaseSortType\r\n}\r\n\r\ninterface RangeValue {\r\n  max: number;\r\n  min: number;\r\n}\r\n\r\ninterface AdSellLeaseSortType {\r\n  time?: \"newest\" | \"oldest\",\r\n  price?: \"low_to_high\" | \"high_to_low\",\r\n  view?: \"low_to_high\" | \"high_to_low\",\r\n  rate?: \"high_to_low\"\r\n}\r\n\r\ninterface ProjectListProp {\r\n  node: {\r\n    price: string,\r\n    name: string,\r\n    land_area: string,\r\n    slug: string,\r\n    created_at: string,\r\n    updated_at: string,\r\n    address: {\r\n      text: string,\r\n      ward: string,\r\n      district: string,\r\n      city: string\r\n    },\r\n    cover_image: string,\r\n    intro_content: string\r\n  }\r\n}\r\n\r\n// @ts-ignore\r\nconst MainSearchPage: NextPage<SearchPageProp> = (props: SearchPageProp) => {\r\n  //Define Query Data\r\n  const [queryFilter, setQueryFilter] = React.useState(\"'{}'\");\r\n  const [totalNumber, setTotalNumber] = React.useState(0);\r\n  const [isNextPage, setNextPage] = React.useState(false);\r\n  const [isPrevPage, setPrevPage] = React.useState(false);\r\n  const [statusLoading, setStatusLoading] = React.useState(false);\r\n\r\n  //Search Data AdsellLease\r\n  const [searchDataAdSellLease, setSearchDataAdSellLease] = React.useState<AdSellLeasesListProps[]>([]);\r\n  //Search Data Project\r\n  const [searchDataProject, setSearchDataProject] = React.useState<ProjectListProp[]>([]);\r\n\r\n  //Layered Navigation Data\r\n  const [dataLayeredNavigation, setDataLayeredNavigation] = React.useState<DataQueryProp>(props.dataQuery);\r\n  const router = useRouter();\r\n  const updateLayeredNavigation = (data: DataQueryProp) => {\r\n    let valueString = getFilterString(data);\r\n    setDataLayeredNavigation(data);\r\n    setQueryFilter(valueString);\r\n    processRenderPage(1, null, valueString);\r\n    updateQueryString(data);\r\n  };\r\n\r\n  const updateQueryString = (data: DataQueryProp) => {\r\n    let queryString = processQueryUrl.processQueryUrl(data, props.typePage);\r\n    let slugAs = '/nha-dat-ban';\r\n    let urlProcess = '/nha-dat-ban';\r\n\r\n    if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\r\n      slugAs = '/du-an-bat-dong-san';\r\n      urlProcess = '/du-an-bat-dong-san';\r\n    }\r\n\r\n    if (data.slug && (props.typePage === 'ad-sell-lease-location' || props.typePage === 'ad-sell-lease-index')) {\r\n      urlProcess = urlProcess + '/[slug]';\r\n      slugAs = slugAs + '/' + data.slug;\r\n    }\r\n    if (queryString) {\r\n      slugAs = slugAs +  '?' + queryString;\r\n    }\r\n    Router.push(urlProcess, slugAs, { shallow: false });\r\n  };\r\n\r\n  const getFilterString = (filterQuery: DataQueryProp) => {\r\n    let filterQueryProcess = processQueryUrl.processQueryString(filterQuery);\r\n    let valueString = JSON.stringify(filterQueryProcess);\r\n    valueString = valueString.split('\"').join(\"'\");\r\n    return valueString;\r\n  };\r\n\r\n  //First Render Data\r\n  useEffect(() => {\r\n    let valueString = getFilterString(props.dataQuery);\r\n    processRenderPage(props.dataQuery.page, null, valueString);\r\n  }, [props.dataQuery]);\r\n\r\n  //Process Render Page\r\n  const processRenderPage = (page: number|null, limit: number|null, filter: string|null) => {\r\n    setStatusLoading(true);\r\n    let queryFilterPrepare = filter?filter:queryFilter;\r\n\r\n    let queryGraphQL = GET_AD_SELL_LEASES;\r\n    if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\r\n      queryGraphQL = GET_PROJECT_LIST;\r\n    }\r\n    apolloClient.query({query: queryGraphQL, variables: {\r\n        \"page\": dataLayeredNavigation.page,\r\n        \"limit\": dataLayeredNavigation.limit,\r\n        \"filter\": queryFilterPrepare\r\n    }}).then(response => {\r\n      setStatusLoading(false);\r\n      if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\r\n        //Set Search Data\r\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.edges)) {\r\n          setSearchDataProject(response.data.projects.edges);\r\n        }\r\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.edges)) {\r\n          setTotalNumber(response.data.projects.edges.length);\r\n        }\r\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.pageInfo.hasNextPage)) {\r\n          setNextPage(response.data.projects.pageInfo.hasNextPage);\r\n        }\r\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.pageInfo.hasPreviousPage)) {\r\n          setPrevPage(response.data.projects.pageInfo.hasPreviousPage);\r\n        }\r\n\r\n        //If Blank\r\n        if (Validator.isBlank(response.data) || Validator.isBlank(response.data.projects.edges)) {\r\n          setSearchDataProject([]);\r\n          setTotalNumber(0);\r\n          setNextPage(false);\r\n          setPrevPage(false);\r\n        }\r\n      } else {\r\n        //Set Search Data\r\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\r\n          setSearchDataAdSellLease(response.data.adSellLeases.edges);\r\n        }\r\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\r\n          setTotalNumber(response.data.adSellLeases.edges.length);\r\n        }\r\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.pageInfo.hasNextPage)) {\r\n          setNextPage(response.data.adSellLeases.pageInfo.hasNextPage);\r\n        }\r\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.pageInfo.hasPreviousPage)) {\r\n          setPrevPage(response.data.adSellLeases.pageInfo.hasPreviousPage);\r\n        }\r\n\r\n        //If Blank\r\n        if (Validator.isBlank(response.data) || Validator.isBlank(response.data.adSellLeases.edges)) {\r\n          setSearchDataAdSellLease([]);\r\n          setTotalNumber(0);\r\n          setNextPage(false);\r\n          setPrevPage(false);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  //Process Open Left Layered Navigation\r\n  const [state, setState] = React.useState({\r\n    top: false,\r\n    left: false,\r\n    bottom: false,\r\n    right: false,\r\n  });\r\n  // @ts-ignore\r\n  const toggleDrawer = (side: string, open: boolean) => event => {\r\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\r\n      return;\r\n    }\r\n    setState({...state, [side]: open});\r\n  };\r\n\r\n  // @ts-ignore\r\n  const handleOpenPopup = () => {\r\n    setState({...state, [\"right\"]: true});\r\n  };\r\n\r\n  //Process Next Page, Previous Page\r\n  const onNextPage = () => {\r\n    let nextPage = Number(dataLayeredNavigation.page) + 1;\r\n    dataLayeredNavigation.page = nextPage;\r\n    setDataLayeredNavigation(dataLayeredNavigation);\r\n    processRenderPage(nextPage, null, null);\r\n    updateQueryString(dataLayeredNavigation);\r\n  };\r\n\r\n  const onPrevPage = () => {\r\n    let previousPage = Number(dataLayeredNavigation.page) - 1;\r\n    if (previousPage >= 1) {\r\n      dataLayeredNavigation.page = previousPage;\r\n      setDataLayeredNavigation(dataLayeredNavigation);\r\n      processRenderPage(previousPage, null, null);\r\n      updateQueryString(dataLayeredNavigation);\r\n    }\r\n  };\r\n\r\n  //Prepare and Filter Location\r\n  let locationItem = {\r\n    id: null,\r\n    name: null,\r\n    title: null,\r\n    slug: null,\r\n    seo_title: null,\r\n    description: null,\r\n    seo_description: null,\r\n    image: null\r\n  };\r\n  if (!Validator.isBlank(props.location.city) && !Validator.isBlank(props.location.city.id)) {\r\n    locationItem =  Object.assign(locationItem, props.location.city);\r\n  }\r\n  if (!Validator.isBlank(props.location.district) && !Validator.isBlank(props.location.district.id)) {\r\n    locationItem = Object.assign(locationItem, props.location.district);\r\n  }\r\n  if (!Validator.isBlank(props.location.ward) && !Validator.isBlank(props.location.ward.id)) {\r\n    locationItem = Object.assign(locationItem, props.location.ward);\r\n  }\r\n\r\n  //Prepare page content\r\n  let titlePage = '';\r\n  let descriptionPage = '';\r\n  let heading = '';\r\n\r\n\r\n  if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\r\n    if (!Validator.isBlank(locationItem.name)) {\r\n      if (!Validator.isBlank(locationItem.seo_title)) {\r\n        titlePage = String(locationItem.seo_title);\r\n      } else {\r\n        titlePage = 'Dự án tại ' + locationItem.name + ' năm 2020';\r\n      }\r\n      if (!Validator.isBlank(locationItem.title)) {\r\n        heading = String(locationItem.title);\r\n      } else {\r\n        heading = 'Dự án tại ' + locationItem.name;\r\n      }\r\n      if (!Validator.isBlank(locationItem.seo_description)) {\r\n        descriptionPage = String(locationItem.seo_description);\r\n      } else {\r\n        descriptionPage = '';\r\n      }\r\n    } else {\r\n      titlePage = \"Tin tức dự án bất động sản toàn quốc đầy đủ, cập nhật nhất\";\r\n      heading = 'Tìm dự án';\r\n      descriptionPage = 'Nhà Đất Mới cập nhật liên tục tất cả dự án bất động sản trên toàn quốc với đầy đủ thông tin về quy mô, mức giá, tiến độ và đánh giá tiềm năng phát triển.';\r\n    }\r\n  } else {\r\n    if (!Validator.isBlank(locationItem.name)) {\r\n      if (!Validator.isBlank(locationItem.seo_title)) {\r\n        titlePage = String(locationItem.seo_title);\r\n      } else {\r\n        titlePage = 'Mua bán nhà tại ' + locationItem.name + ' năm 2020';\r\n      }\r\n      if (!Validator.isBlank(locationItem.title)) {\r\n        heading = String(locationItem.title);\r\n      } else {\r\n        heading = 'Mua bán nhà tại ' + locationItem.name;\r\n      }\r\n      if (!Validator.isBlank(locationItem.seo_description)) {\r\n        descriptionPage = String(locationItem.seo_description);\r\n      } else {\r\n        descriptionPage = '';\r\n      }\r\n    } else {\r\n      titlePage = \"Tin rao bất động sản uy tín nhất hiện nay - Nhà Đất Mới\";\r\n      heading = 'Tìm tin rao';\r\n      descriptionPage = 'Website đăng tin, mua bán bất động sản uy tín, nhanh chóng và hiệu quả. 100% tin rao trên toàn quốc đều được kiểm chứng và xác thực bởi hệ thống thông minh.';\r\n    }\r\n  }\r\n\r\n  let pathString = 'nha-dat-ban';\r\n  if (props.typePage !== 'ad-sell-lease-location' && props.typePage !== 'ad-sell-lease-index') {\r\n    pathString = 'du-an-bat-dong-san';\r\n  }\r\n  let canonicalTag = mainURL + '/' + pathString;\r\n  if (props.slug) {\r\n    canonicalTag = canonicalTag + '/' + props.slug;\r\n  }\r\n\r\n  let imageAvatar = 'https://static.nhadatmoi.net/default/home_default.jpg';\r\n  if (locationItem.image) {\r\n    let imageString = String(locationItem.image);\r\n    imageAvatar = urlProcess.processImageUrl(imageString, '');\r\n  }\r\n\r\n  const freshText = (input: string) => {\r\n    input = StringProcess.stripProperties(input, []);\r\n    input = StringProcess.stripTags(input, '');\r\n    input = input.replace(/&nbsp;/g, ' ');\r\n    return input;\r\n  };\r\n  const convertDescription = (input: string) => {\r\n    return input.replace(/&#(\\d+);/g, function(match, dec) {\r\n      return String.fromCharCode(dec);\r\n    });\r\n  };\r\n\r\n  if (locationItem.description && (descriptionPage === '' || !descriptionPage)) {\r\n    let textToReplace = String(locationItem.description);\r\n    descriptionPage = freshText(textToReplace);\r\n    descriptionPage = convertDescription(descriptionPage);\r\n    descriptionPage = StringProcess.truncateString(descriptionPage, 255, '');\r\n  }\r\n\r\n  // @ts-ignore\r\n  return (\r\n    <Layout\r\n      title={titlePage}\r\n      description={descriptionPage}\r\n      {...props}\r\n      image={imageAvatar}\r\n      canonical={ canonicalTag }\r\n      path={pathString}\r\n    >\r\n      <div className=\"body_container\">\r\n        {/* <Hidden smDown>\r\n          <LayeredNavigation className=\"search_layered\" updateLayeredNavigation={updateLayeredNavigation} dataLayeredNavigation={dataLayeredNavigation}/>\r\n        </Hidden> */}\r\n        <Drawer anchor=\"right\" open={state.right} onClose={toggleDrawer('right', false)}>\r\n          <LayeredNavigation className=\"search_layered\" updateLayeredNavigation={updateLayeredNavigation} dataLayeredNavigation={dataLayeredNavigation}/>\r\n        </Drawer>\r\n        <Grid item className=\"search_body border\">\r\n          <TitleBlock\r\n            title={heading}\r\n            description={\"Hiển thị \" +  StringProcess.addCommas(Number(totalNumber).toString()) + \" kết quả\"}\r\n            type={\"h1\"}\r\n            path={\"\"}\r\n          />\r\n          <TopLayered className=\"top_layered\" onOpen={() => handleOpenPopup()} updateLayeredNavigation={updateLayeredNavigation} dataLayeredNavigation={dataLayeredNavigation}/>\r\n\r\n          {statusLoading &&\r\n          <LoadingPage className=\"loading_page\" grid={{xl: 3, lg: 4, md: 6, sm: 6, xs: 12}} numberLimit={12}/>\r\n          }\r\n\r\n          {!statusLoading && searchDataAdSellLease.length == 0 && (props.typePage === 'ad-sell-lease-location' || props.typePage === 'ad-sell-lease-index') &&\r\n          <EmptyPage title=\"Không tìm thấy kết quả nào\" description=\"Vui lòng sử dụng từ khóa khác hoặc sử dụng bộ lọc nâng cao để tìm kiếm kết quả phù hợp\"/>\r\n          }\r\n\r\n          {!statusLoading && searchDataProject.length == 0 && (props.typePage === 'project-index') &&\r\n          <EmptyPage title=\"Không tìm thấy kết quả nào\" description=\"Vui lòng sử dụng từ khóa khác hoặc sử dụng bộ lọc nâng cao để tìm kiếm kết quả phù hợp\"/>\r\n          }\r\n\r\n          {!statusLoading && searchDataAdSellLease.length > 0 && (props.typePage === 'ad-sell-lease-location' || props.typePage === 'ad-sell-lease-index') &&\r\n          <div>\r\n            <GridAdSellLeases\r\n              grid={{xl: 3, lg: 4, md: 6, sm: 6, xs: 12}}\r\n              gridData={searchDataAdSellLease}\r\n              className=\"grid__list\"\r\n            />\r\n            <PaginationPage\r\n              isNextPage={isNextPage}\r\n              isPrevPage={isPrevPage}\r\n              currentPage={2}\r\n              onNextPage={onNextPage}\r\n              onPrevPage={onPrevPage}\r\n            />\r\n          </div>\r\n          }\r\n          {!statusLoading && searchDataProject.length > 0 && (props.typePage === 'project-index') &&\r\n          <div>\r\n            <GridProject\r\n              grid={{xl: 3, lg: 4, md: 6, sm: 6, xs: 12}}\r\n              gridData={searchDataProject}\r\n              className=\"grid__list\"\r\n            />\r\n            <PaginationPage\r\n              isNextPage={isNextPage}\r\n              isPrevPage={isPrevPage}\r\n              currentPage={2}\r\n              onNextPage={onNextPage}\r\n              onPrevPage={onPrevPage}\r\n            />\r\n          </div>\r\n          }\r\n          <CategoryContent description={locationItem.description}/>\r\n          <SearchKeyword/>\r\n        </Grid>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default MainSearchPage;\r\n"]},"metadata":{},"sourceType":"module"}