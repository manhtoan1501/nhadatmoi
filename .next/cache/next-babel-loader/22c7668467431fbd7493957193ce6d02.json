{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\manh nhan\\\\Desktop\\\\Nhadatmoi\\\\components\\\\Search\\\\SmartSearch.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { Button, Typography, Grid } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Validator from \"../../modules/validator\";\nimport SearchIcon from '@material-ui/icons/Search';\nimport { localStorageSearch } from \"../../constants\";\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return createStyles({\n    root: {\n      display: 'flex'\n    },\n    paper: {\n      marginRight: theme.spacing(2)\n    }\n  });\n});\nvar dataProjectKey = [{\n  title: \"Vinhomes Central Park\"\n}, {\n  title: \"Vinhomes Grand Park\"\n}, {\n  title: \"Vinhomes Smart City\"\n}, {\n  title: \"Nhà Đất Hải Phòng\"\n}, {\n  title: \"Nhà Đất Hà Nội\"\n}];\nvar dataSearch = new Array();\nexport default function MenuListComposition() {\n  var classes = useStyles();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      valueSearch = _React$useState4[0],\n      setValueSearch = _React$useState4[1];\n\n  var anchorRef = React.useRef(null);\n\n  var handleToggle = function handleToggle() {\n    setOpen(function (prevOpen) {\n      return !prevOpen;\n    });\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === 'Tab') {\n      event.preventDefault();\n      setOpen(false);\n    }\n  }\n\n  var removeLocalSearch = function removeLocalSearch() {\n    localStorage.removeItem(localStorageSearch);\n    setOpen(false);\n    setValueSearch(\"\");\n  };\n\n  var prevOpen = React.useRef(open);\n  useEffect(function () {\n    dataSearch = JSON.parse(localStorage.getItem(localStorageSearch));\n    if (!_Array$isArray(dataSearch)) dataSearch = [];\n\n    if (!Validator.isBlank(localStorage.getItem(localStorageSearch))) {\n      localStorage.setItem(localStorageSearch, _JSON$stringify(dataSearch));\n    }\n\n    if (prevOpen.current === true && open === false) {// anchorRef.current.focus();\n    }\n\n    prevOpen.current = open;\n  }, [open]);\n\n  var _onBlur = function onBlur(e) {\n    if (!_Array$isArray(dataSearch)) dataSearch = [];\n\n    if (e.target.value) {\n      var checkExist = false;\n      dataSearch.map(function (item) {\n        if (item && item.title === e.target.value) {\n          console.log(\"checkExist \", checkExist);\n          checkExist = true;\n        }\n      });\n\n      if (!checkExist || dataSearch.length == 0) {\n        dataSearch.unshift({\n          title: e.target.value\n        });\n      }\n\n      if (dataSearch.length >= 4) {\n        dataSearch.splice(3, 1);\n      }\n\n      localStorage.setItem(localStorageSearch, _JSON$stringify(dataSearch));\n    }\n\n    console.log(\" Blur\", dataSearch);\n  };\n\n  var handleCloseSearch = function handleCloseSearch(index) {\n    var titleSearch = dataProjectKey[index].title || \"\";\n    setValueSearch(titleSearch);\n    setOpen(false);\n  };\n\n  var handleCloseHistory = function handleCloseHistory(index) {\n    if (index !== -1) {\n      var titleSearch = dataSearch[index].title || \"\";\n      setValueSearch(titleSearch);\n    }\n\n    setOpen(false);\n  };\n\n  var onChangeSearch = function onChangeSearch() {// apolloClient.query({query: GET_PROJECT_LIST_NAME, variables: {\n    //   \"page\": 1,\n    //   \"limit\": 6,\n    //   \"filter\": dataFilter\n    // }}).then(response => {\n    //   if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\n    //     setSearchDataAdSellLease(response.data.adSellLeases.edges);\n    //   }\n    // });\n  };\n\n  return __jsx(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    justify: \"flex-start\",\n    alignItems: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, __jsx(TextField, {\n    fullWidth: true,\n    id: \"outlined-basic\",\n    variant: \"outlined\",\n    onChange: function onChange(e) {\n      return setValueSearch(e.target.value);\n    },\n    onBlur: function onBlur(e) {\n      return _onBlur(e);\n    },\n    value: valueSearch,\n    autoComplete: \"off\",\n    ref: anchorRef,\n    margin: \"dense\",\n    onClick: handleToggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  })), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, __jsx(Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, __jsx(SearchIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }), \"T\\xECm ki\\u1EBFm\")), __jsx(Grid, {\n    item: true,\n    xs: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, __jsx(Popper, {\n    open: open,\n    anchorEl: anchorRef.current,\n    role: undefined,\n    transition: true,\n    disablePortal: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, function (_ref) {\n    var TransitionProps = _ref.TransitionProps,\n        placement = _ref.placement;\n    return __jsx(Grow, _extends({}, TransitionProps, {\n      style: {\n        transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), __jsx(Paper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, __jsx(ClickAwayListener, {\n      onClickAway: function onClickAway() {\n        return setOpen(false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, __jsx(MenuList, {\n      autoFocusItem: open,\n      id: \"menu-list-grow\",\n      onKeyDown: handleListKeyDown,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, __jsx(MenuItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, __jsx(Typography, {\n      style: {\n        fontSize: \"Roboto, sans-serif\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"T\\u1EEA KH\\xD3A HOT\")), dataProjectKey.map(function (item, index) {\n      return __jsx(MenuItem, {\n        key: index,\n        onClick: function onClick() {\n          return handleCloseSearch(index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, item.title);\n    }), __jsx(MenuItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, __jsx(Typography, {\n      style: {\n        fontSize: \"Roboto, sans-serif\",\n        marginRight: \"120px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"L\\u1ECACH S\\u1EEC T\\xCCM KI\\u1EBEM\"), __jsx(Typography, {\n      style: {\n        color: \"red\"\n      },\n      onClick: removeLocalSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"X\\xF3a\")), dataSearch.map(function (item, index) {\n      return __jsx(MenuItem, {\n        key: index,\n        onClick: function onClick() {\n          return handleCloseHistory(index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, item.title);\n    })))));\n  }))));\n}","map":{"version":3,"sources":["C:/Users/manh nhan/Desktop/Nhadatmoi/components/Search/SmartSearch.tsx"],"names":["React","useEffect","Button","Typography","Grid","TextField","ClickAwayListener","Grow","Paper","Popper","MenuItem","MenuList","Validator","SearchIcon","localStorageSearch","makeStyles","createStyles","useStyles","theme","root","display","paper","marginRight","spacing","dataProjectKey","title","dataSearch","Array","MenuListComposition","classes","useState","open","setOpen","valueSearch","setValueSearch","anchorRef","useRef","handleToggle","prevOpen","handleListKeyDown","event","key","preventDefault","removeLocalSearch","localStorage","removeItem","JSON","parse","getItem","isBlank","setItem","current","onBlur","e","target","value","checkExist","map","item","console","log","length","unshift","splice","handleCloseSearch","index","titleSearch","handleCloseHistory","onChangeSearch","undefined","TransitionProps","placement","transformOrigin","fontSize","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Button, Typography, Grid, Icon } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport Validator from \"../../modules/validator\";\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport { localStorageSearch } from \"../../constants\";\r\nimport {apolloClient} from \"../../utils\";\r\nimport {GET_PROJECT_LIST_NAME} from \"../../graphql/project/queries\";\r\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: 'flex',\r\n    },\r\n    paper: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n  }),\r\n);\r\n\r\nconst dataProjectKey = [\r\n  { title: \"Vinhomes Central Park\" },\r\n  { title: \"Vinhomes Grand Park\" },\r\n  { title: \"Vinhomes Smart City\" },\r\n  { title: \"Nhà Đất Hải Phòng\" },\r\n  { title: \"Nhà Đất Hà Nội\" }\r\n]\r\n\r\nlet dataSearch = new Array()\r\nexport default function MenuListComposition() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [valueSearch, setValueSearch] = React.useState(\"\");\r\n  const anchorRef = React.useRef(null);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(prevOpen => !prevOpen);\r\n  }\r\n\r\n  function handleListKeyDown(event: any) {\r\n    if (event.key === 'Tab') {\r\n      event.preventDefault();\r\n      setOpen(false);\r\n    }\r\n  }\r\n\r\n  const removeLocalSearch = () => {\r\n    localStorage.removeItem(localStorageSearch)\r\n    setOpen(false)\r\n    setValueSearch(\"\")\r\n  }\r\n\r\n  const prevOpen = React.useRef(open)\r\n  useEffect(() => {\r\n    dataSearch = JSON.parse(localStorage.getItem(localStorageSearch) as string)\r\n    if(!Array.isArray(dataSearch)) dataSearch = []\r\n    if(!Validator.isBlank(localStorage.getItem(localStorageSearch))) {\r\n      localStorage.setItem(localStorageSearch, JSON.stringify(dataSearch))\r\n    } \r\n    if (prevOpen.current === true && open === false) {\r\n      // anchorRef.current.focus();\r\n    }\r\n    prevOpen.current = open\r\n  }, [open])\r\n\r\n  const onBlur = (e: any) => {\r\n    if(!Array.isArray(dataSearch)) dataSearch = []\r\n    if(e.target.value){\r\n      let checkExist = false\r\n      dataSearch.map(item => {\r\n        if(item && item.title === e.target.value) {\r\n          console.log(\"checkExist \", checkExist)\r\n          checkExist = true\r\n        }\r\n      })\r\n      \r\n      if(!checkExist || dataSearch.length == 0){\r\n        dataSearch.unshift({ title: e.target.value})\r\n      }\r\n      if(dataSearch.length >= 4){\r\n        dataSearch.splice(3, 1)        \r\n      }\r\n      localStorage.setItem(localStorageSearch, JSON.stringify(dataSearch))\r\n    }\r\n    console.log(\" Blur\", dataSearch)\r\n  }\r\n  \r\n  const handleCloseSearch = (index: number) => {\r\n    let titleSearch = dataProjectKey[index].title || \"\"\r\n    setValueSearch(titleSearch)\r\n    setOpen(false);\r\n  }\r\n\r\n  const handleCloseHistory = (index: number) => {\r\n    if(index !== -1){\r\n      let titleSearch = dataSearch[index].title || \"\"\r\n      setValueSearch(titleSearch)\r\n    }\r\n    setOpen(false)\r\n  }\r\n\r\nconst onChangeSearch = () => {\r\n  // apolloClient.query({query: GET_PROJECT_LIST_NAME, variables: {\r\n  //   \"page\": 1,\r\n  //   \"limit\": 6,\r\n  //   \"filter\": dataFilter\r\n  // }}).then(response => {\r\n  //   if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\r\n  //     setSearchDataAdSellLease(response.data.adSellLeases.edges);\r\n  //   }\r\n  // });\r\n}\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={1} justify=\"flex-start\" alignItems=\"center\">\r\n        <Grid item xs={4}>\r\n          <TextField\r\n            fullWidth={true}\r\n            id=\"outlined-basic\" \r\n            variant=\"outlined\"\r\n            onChange={(e: any) => setValueSearch(e.target.value)}\r\n            onBlur={(e: any) => onBlur(e)}\r\n            value={valueSearch}\r\n            autoComplete=\"off\"\r\n            ref={anchorRef}\r\n            margin=\"dense\"\r\n            onClick={handleToggle}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Button><SearchIcon />Tìm kiếm</Button>\r\n        </Grid>\r\n        <Grid item xs={2}></Grid>\r\n        <Grid item xs={12}>\r\n          <Popper open={open} anchorEl={anchorRef.current} role={undefined} transition disablePortal>\r\n              {({ TransitionProps, placement }) => (\r\n                <Grow {...TransitionProps} style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }} >\r\n                  <Paper>\r\n                    <ClickAwayListener onClickAway={() => setOpen(false)}>\r\n                      <MenuList autoFocusItem={open} id=\"menu-list-grow\" onKeyDown={handleListKeyDown}>\r\n                        <MenuItem>\r\n                          <Typography style={{ fontSize: \"Roboto, sans-serif\" }}>\r\n                            TỪ KHÓA HOT\r\n                          </Typography>\r\n                        </MenuItem>\r\n                        {dataProjectKey.map((item: any, index: number) => \r\n                          <MenuItem key={index} onClick={() => handleCloseSearch(index)}>\r\n                            {item.title}\r\n                          </MenuItem>)}\r\n                        <MenuItem>\r\n                          <Typography style={{ fontSize: \"Roboto, sans-serif\", marginRight: \"120px\" }} >\r\n                            LỊCH SỬ TÌM KIẾM\r\n                          </Typography>\r\n                          <Typography style={{ color: \"red\" }} \r\n                            onClick={removeLocalSearch}>Xóa \r\n                          </Typography>\r\n                        </MenuItem>\r\n                        {dataSearch.map((item: any, index: number) =>\r\n                          <MenuItem key={index} onClick={() => handleCloseHistory(index)}>\r\n                            {item.title}\r\n                          </MenuItem>)}\r\n                      </MenuList>\r\n                    </ClickAwayListener>\r\n                  </Paper>\r\n                </Grow>\r\n              )}\r\n            </Popper>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}