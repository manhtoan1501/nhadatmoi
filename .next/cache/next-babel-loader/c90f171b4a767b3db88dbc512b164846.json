{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"C:\\\\Users\\\\manh nhan\\\\Desktop\\\\Nhadatmoi\\\\components\\\\LayeredNavigation\\\\MainSearchPage.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from \"react\"; //Import Layout\n\nimport Layout from \"../../components/Layout/Layout\";\nimport processQueryUrl from \"../../modules/LayeredNavigation/processQueryUrl\"; //Import Components\n\nimport TitleBlock from \"../../components/Index/TitleBlock\";\nimport GridAdSellLeases from \"../../components/GridList/GridAdSellLeases\";\nimport GridProject from \"../../components/GridList/GridProject\";\nimport LayeredNavigation from \"../../components/LayeredNavigation/LayeredNavigation\";\nimport TopLayered from \"../../components/LayeredNavigation/TopLayered\";\nimport Grid from \"@material-ui/core/Grid\";\nimport SearchKeyword from \"../../components/Search/KeywordSlide\";\nimport PaginationPage from \"../../components/Pagination/Pagination\";\nimport LoadingPage from \"../../components/Display/LoadingPage\";\nimport StringProcess from \"./../../modules/stringProcess\";\nimport Validator from \"../../modules/validator\";\nimport CategoryContent from \"../../components/Search/CategoryContent\";\nimport Router, { useRouter } from \"next/router\"; //Import SCSS\n\nimport \"../../assets/scss/style.scss\";\nimport { apolloClient } from \"../../utils\";\nimport { GET_AD_SELL_LEASES } from \"../../graphql/ad_sell_leases/queries\";\nimport EmptyPage from \"../../components/Display/EmptyPage\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport { useEffect } from \"react\";\nimport { GET_PROJECT_LIST } from \"../../graphql/project/queries\";\nimport { mainURL } from \"../../constants\";\nimport urlProcess from \"../../modules/urlProcess\";\n\n// @ts-ignore\nconst MainSearchPage = props => {\n  //Define Query Data\n  const [queryFilter, setQueryFilter] = React.useState(\"'{}'\");\n  const [totalNumber, setTotalNumber] = React.useState(0);\n  const [isNextPage, setNextPage] = React.useState(false);\n  const [isPrevPage, setPrevPage] = React.useState(false);\n  const [statusLoading, setStatusLoading] = React.useState(false);\n  const [typeView, setTypeView] = React.useState(\"grid\"); //Search Data AdsellLease\n\n  const [searchDataAdSellLease, setSearchDataAdSellLease] = React.useState([]); //Search Data Project\n\n  const [searchDataProject, setSearchDataProject] = React.useState([]); //Layered Navigation Data\n\n  const [dataLayeredNavigation, setDataLayeredNavigation] = React.useState(props.dataQuery);\n  const router = useRouter();\n\n  const updateLayeredNavigation = data => {\n    let valueString = getFilterString(data);\n    setDataLayeredNavigation(data);\n    setQueryFilter(valueString);\n    processRenderPage(1, null, valueString);\n    updateQueryString(data);\n  };\n\n  const updateQueryString = data => {\n    let queryString = processQueryUrl.processQueryUrl(data, props.typePage);\n    let slugAs = \"/nha-dat-ban\";\n    let urlProcess = \"/nha-dat-ban\";\n\n    if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\n      slugAs = \"/du-an-bat-dong-san\";\n      urlProcess = \"/du-an-bat-dong-san\";\n    }\n\n    if (data.slug && (props.typePage === \"ad-sell-lease-location\" || props.typePage === \"ad-sell-lease-index\")) {\n      urlProcess = urlProcess + \"/[slug]\";\n      slugAs = slugAs + \"/\" + data.slug;\n    }\n\n    if (queryString) {\n      slugAs = slugAs + \"?\" + queryString;\n    }\n\n    Router.push(urlProcess, slugAs, {\n      shallow: false\n    });\n  };\n\n  const getFilterString = filterQuery => {\n    let filterQueryProcess = processQueryUrl.processQueryString(filterQuery);\n\n    let valueString = _JSON$stringify(filterQueryProcess);\n\n    valueString = valueString.split('\"').join(\"'\");\n    return valueString;\n  }; //First Render Data\n\n\n  useEffect(() => {\n    let valueString = getFilterString(props.dataQuery);\n    processRenderPage(props.dataQuery.page, null, valueString);\n  }, [props.dataQuery]); //Process Render Page\n\n  const processRenderPage = (page, limit, filter) => {\n    setStatusLoading(true);\n    let queryFilterPrepare = filter ? filter : queryFilter;\n    let queryGraphQL = GET_AD_SELL_LEASES;\n\n    if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\n      queryGraphQL = GET_PROJECT_LIST;\n    }\n\n    apolloClient.query({\n      query: queryGraphQL,\n      variables: {\n        page: dataLayeredNavigation.page,\n        limit: dataLayeredNavigation.limit,\n        filter: queryFilterPrepare\n      }\n    }).then(response => {\n      setStatusLoading(false);\n\n      if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\n        //Set Search Data\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.edges)) {\n          setSearchDataProject(response.data.projects.edges);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.edges)) {\n          setTotalNumber(response.data.projects.edges.length);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.pageInfo.hasNextPage)) {\n          setNextPage(response.data.projects.pageInfo.hasNextPage);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.pageInfo.hasPreviousPage)) {\n          setPrevPage(response.data.projects.pageInfo.hasPreviousPage);\n        } //If Blank\n\n\n        if (Validator.isBlank(response.data) || Validator.isBlank(response.data.projects.edges)) {\n          setSearchDataProject([]);\n          setTotalNumber(0);\n          setNextPage(false);\n          setPrevPage(false);\n        }\n      } else {\n        //Set Search Data\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\n          setSearchDataAdSellLease(response.data.adSellLeases.edges);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\n          setTotalNumber(response.data.adSellLeases.edges.length);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.pageInfo.hasNextPage)) {\n          setNextPage(response.data.adSellLeases.pageInfo.hasNextPage);\n        }\n\n        if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.pageInfo.hasPreviousPage)) {\n          setPrevPage(response.data.adSellLeases.pageInfo.hasPreviousPage);\n        } //If Blank\n\n\n        if (Validator.isBlank(response.data) || Validator.isBlank(response.data.adSellLeases.edges)) {\n          setSearchDataAdSellLease([]);\n          setTotalNumber(0);\n          setNextPage(false);\n          setPrevPage(false);\n        }\n      }\n    });\n  }; //Process Open Left Layered Navigation\n\n\n  const [state, setState] = React.useState({\n    top: false,\n    left: false,\n    bottom: false,\n    right: false\n  }); // @ts-ignore\n\n  const toggleDrawer = (side, open) => event => {\n    if (event.type === \"keydown\" && (event.key === \"Tab\" || event.key === \"Shift\")) {\n      return;\n    }\n\n    setState(_objectSpread({}, state, {\n      [side]: open\n    }));\n  }; // @ts-ignore\n\n\n  const handleOpenPopup = () => {\n    setState(_objectSpread({}, state, {\n      [\"right\"]: true\n    }));\n  }; // change view grid, list\n\n\n  const onChangeView = type => {\n    setTypeView(type);\n  }; //Process Next Page, Previous Page\n\n\n  const onNextPage = () => {\n    let nextPage = Number(dataLayeredNavigation.page) + 1;\n    dataLayeredNavigation.page = nextPage;\n    setDataLayeredNavigation(dataLayeredNavigation);\n    processRenderPage(nextPage, null, null);\n    updateQueryString(dataLayeredNavigation);\n  };\n\n  const onPrevPage = () => {\n    let previousPage = Number(dataLayeredNavigation.page) - 1;\n\n    if (previousPage >= 1) {\n      dataLayeredNavigation.page = previousPage;\n      setDataLayeredNavigation(dataLayeredNavigation);\n      processRenderPage(previousPage, null, null);\n      updateQueryString(dataLayeredNavigation);\n    }\n  }; //Prepare and Filter Location\n\n\n  let locationItem = {\n    id: null,\n    name: null,\n    title: null,\n    slug: null,\n    seo_title: null,\n    description: null,\n    seo_description: null,\n    image: null\n  };\n\n  if (!Validator.isBlank(props.location.city) && !Validator.isBlank(props.location.city.id)) {\n    locationItem = _Object$assign(locationItem, props.location.city);\n  }\n\n  if (!Validator.isBlank(props.location.district) && !Validator.isBlank(props.location.district.id)) {\n    locationItem = _Object$assign(locationItem, props.location.district);\n  }\n\n  if (!Validator.isBlank(props.location.ward) && !Validator.isBlank(props.location.ward.id)) {\n    locationItem = _Object$assign(locationItem, props.location.ward);\n  } //Prepare page content\n\n\n  let titlePage = \"\";\n  let descriptionPage = \"\";\n  let heading = \"\";\n\n  if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\n    if (!Validator.isBlank(locationItem.name)) {\n      if (!Validator.isBlank(locationItem.seo_title)) {\n        titlePage = String(locationItem.seo_title);\n      } else {\n        titlePage = \"Dự án tại \" + locationItem.name + \" năm 2020\";\n      }\n\n      if (!Validator.isBlank(locationItem.title)) {\n        heading = String(locationItem.title);\n      } else {\n        heading = \"Dự án tại \" + locationItem.name;\n      }\n\n      if (!Validator.isBlank(locationItem.seo_description)) {\n        descriptionPage = String(locationItem.seo_description);\n      } else {\n        descriptionPage = \"\";\n      }\n    } else {\n      titlePage = \"Tin tức dự án bất động sản toàn quốc đầy đủ, cập nhật nhất\";\n      heading = \"Tìm dự án\";\n      descriptionPage = \"Nhà Đất Mới cập nhật liên tục tất cả dự án bất động sản trên toàn quốc với đầy đủ thông tin về quy mô, mức giá, tiến độ và đánh giá tiềm năng phát triển.\";\n    }\n  } else {\n    if (!Validator.isBlank(locationItem.name)) {\n      if (!Validator.isBlank(locationItem.seo_title)) {\n        titlePage = String(locationItem.seo_title);\n      } else {\n        titlePage = \"Mua bán nhà tại \" + locationItem.name + \" năm 2020\";\n      }\n\n      if (!Validator.isBlank(locationItem.title)) {\n        heading = String(locationItem.title);\n      } else {\n        heading = \"Mua bán nhà tại \" + locationItem.name;\n      }\n\n      if (!Validator.isBlank(locationItem.seo_description)) {\n        descriptionPage = String(locationItem.seo_description);\n      } else {\n        descriptionPage = \"\";\n      }\n    } else {\n      titlePage = \"Tin rao bất động sản uy tín nhất hiện nay - Nhà Đất Mới\";\n      heading = \"Tìm tin rao\";\n      descriptionPage = \"Website đăng tin, mua bán bất động sản uy tín, nhanh chóng và hiệu quả. 100% tin rao trên toàn quốc đều được kiểm chứng và xác thực bởi hệ thống thông minh.\";\n    }\n  }\n\n  let pathString = \"nha-dat-ban\";\n\n  if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\n    pathString = \"du-an-bat-dong-san\";\n  }\n\n  let canonicalTag = mainURL + \"/\" + pathString;\n\n  if (props.slug) {\n    canonicalTag = canonicalTag + \"/\" + props.slug;\n  }\n\n  let imageAvatar = \"https://static.nhadatmoi.net/default/home_default.jpg\";\n\n  if (locationItem.image) {\n    let imageString = String(locationItem.image);\n    imageAvatar = urlProcess.processImageUrl(imageString, \"\");\n  }\n\n  const freshText = input => {\n    input = StringProcess.stripProperties(input, []);\n    input = StringProcess.stripTags(input, \"\");\n    input = input.replace(/&nbsp;/g, \" \");\n    return input;\n  };\n\n  const convertDescription = input => {\n    return input.replace(/&#(\\d+);/g, function (match, dec) {\n      return String.fromCharCode(dec);\n    });\n  };\n\n  if (locationItem.description && (descriptionPage === \"\" || !descriptionPage)) {\n    let textToReplace = String(locationItem.description);\n    descriptionPage = freshText(textToReplace);\n    descriptionPage = convertDescription(descriptionPage);\n    descriptionPage = StringProcess.truncateString(descriptionPage, 255, \"\");\n  } // @ts-ignore\n\n\n  return __jsx(Layout, _extends({\n    title: titlePage,\n    description: descriptionPage\n  }, props, {\n    image: imageAvatar,\n    canonical: canonicalTag,\n    path: pathString,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"body_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436\n    },\n    __self: this\n  }, __jsx(Hidden, {\n    smDown: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437\n    },\n    __self: this\n  }), __jsx(Drawer, {\n    anchor: \"right\",\n    open: state.right,\n    onClose: toggleDrawer(\"right\", false),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444\n    },\n    __self: this\n  }, __jsx(LayeredNavigation, {\n    className: \"search_layered\",\n    updateLayeredNavigation: updateLayeredNavigation,\n    dataLayeredNavigation: dataLayeredNavigation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445\n    },\n    __self: this\n  })), __jsx(Grid, {\n    item: true,\n    className: \"search_body border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451\n    },\n    __self: this\n  }, __jsx(TitleBlock, {\n    title: heading,\n    description: \"Hiển thị \" + StringProcess.addCommas(Number(totalNumber).toString()) + \" kết quả\",\n    type: \"h1\",\n    path: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452\n    },\n    __self: this\n  }), __jsx(TopLayered, {\n    onChangeView: type => onChangeView(type),\n    className: \"top_layered\",\n    onOpen: () => handleOpenPopup(),\n    updateLayeredNavigation: updateLayeredNavigation,\n    dataLayeredNavigation: dataLayeredNavigation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458\n    },\n    __self: this\n  }), statusLoading && __jsx(LoadingPage, {\n    className: \"loading_page\",\n    grid: {\n      xl: 3,\n      lg: 4,\n      md: 6,\n      sm: 6,\n      xs: 12\n    },\n    numberLimit: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467\n    },\n    __self: this\n  }), !statusLoading && searchDataAdSellLease.length == 0 && (props.typePage === \"ad-sell-lease-location\" || props.typePage === \"ad-sell-lease-index\") && __jsx(EmptyPage, {\n    title: \"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3 n\\xE0o\",\n    description: \"Vui l\\xF2ng s\\u1EED d\\u1EE5ng t\\u1EEB kh\\xF3a kh\\xE1c ho\\u1EB7c s\\u1EED d\\u1EE5ng b\\u1ED9 l\\u1ECDc n\\xE2ng cao \\u0111\\u1EC3 t\\xECm ki\\u1EBFm k\\u1EBFt qu\\u1EA3 ph\\xF9 h\\u1EE3p\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473\n    },\n    __self: this\n  }), !statusLoading && searchDataProject.length == 0 && props.typePage === \"project-index\" && __jsx(EmptyPage, {\n    title: \"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3 n\\xE0o\",\n    description: \"Vui l\\xF2ng s\\u1EED d\\u1EE5ng t\\u1EEB kh\\xF3a kh\\xE1c ho\\u1EB7c s\\u1EED d\\u1EE5ng b\\u1ED9 l\\u1ECDc n\\xE2ng cao \\u0111\\u1EC3 t\\xECm ki\\u1EBFm k\\u1EBFt qu\\u1EA3 ph\\xF9 h\\u1EE3p\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480\n    },\n    __self: this\n  }), !statusLoading && searchDataAdSellLease.length > 0 && (props.typePage === \"ad-sell-lease-location\" || props.typePage === \"ad-sell-lease-index\") && __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489\n    },\n    __self: this\n  }, __jsx(GridAdSellLeases, {\n    grid: {\n      xl: 3,\n      lg: 4,\n      md: 6,\n      sm: 6,\n      xs: 12\n    },\n    gridData: searchDataAdSellLease,\n    className: \"grid__list\",\n    typeView: typeView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490\n    },\n    __self: this\n  })), !statusLoading && searchDataProject.length > 0 && props.typePage === \"project-index\" && __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506\n    },\n    __self: this\n  }, __jsx(GridProject, {\n    grid: {\n      xl: 3,\n      lg: 4,\n      md: 6,\n      sm: 6,\n      xs: 12\n    },\n    gridData: searchDataProject,\n    className: \"grid__list\",\n    typeView: typeView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507\n    },\n    __self: this\n  }), __jsx(PaginationPage, {\n    isNextPage: isNextPage,\n    isPrevPage: isPrevPage,\n    currentPage: 2,\n    onNextPage: onNextPage,\n    onPrevPage: onPrevPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513\n    },\n    __self: this\n  })), __jsx(CategoryContent, {\n    description: locationItem.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522\n    },\n    __self: this\n  }), __jsx(SearchKeyword, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523\n    },\n    __self: this\n  }))));\n};\n\nexport default MainSearchPage;","map":{"version":3,"sources":["C:/Users/manh nhan/Desktop/Nhadatmoi/components/LayeredNavigation/MainSearchPage.tsx"],"names":["React","Layout","processQueryUrl","TitleBlock","GridAdSellLeases","GridProject","LayeredNavigation","TopLayered","Grid","SearchKeyword","PaginationPage","LoadingPage","StringProcess","Validator","CategoryContent","Router","useRouter","apolloClient","GET_AD_SELL_LEASES","EmptyPage","Hidden","Drawer","useEffect","GET_PROJECT_LIST","mainURL","urlProcess","MainSearchPage","props","queryFilter","setQueryFilter","useState","totalNumber","setTotalNumber","isNextPage","setNextPage","isPrevPage","setPrevPage","statusLoading","setStatusLoading","typeView","setTypeView","searchDataAdSellLease","setSearchDataAdSellLease","searchDataProject","setSearchDataProject","dataLayeredNavigation","setDataLayeredNavigation","dataQuery","router","updateLayeredNavigation","data","valueString","getFilterString","processRenderPage","updateQueryString","queryString","typePage","slugAs","slug","push","shallow","filterQuery","filterQueryProcess","processQueryString","split","join","page","limit","filter","queryFilterPrepare","queryGraphQL","query","variables","then","response","isBlank","projects","edges","length","pageInfo","hasNextPage","hasPreviousPage","adSellLeases","state","setState","top","left","bottom","right","toggleDrawer","side","open","event","type","key","handleOpenPopup","onChangeView","onNextPage","nextPage","Number","onPrevPage","previousPage","locationItem","id","name","title","seo_title","description","seo_description","image","location","city","district","ward","titlePage","descriptionPage","heading","String","pathString","canonicalTag","imageAvatar","imageString","processImageUrl","freshText","input","stripProperties","stripTags","replace","convertDescription","match","dec","fromCharCode","textToReplace","truncateString","addCommas","toString","xl","lg","md","sm","xs"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\n//Import Layout\r\nimport Layout from \"../../components/Layout/Layout\";\r\nimport processQueryUrl from \"../../modules/LayeredNavigation/processQueryUrl\";\r\n//Import Components\r\nimport TitleBlock from \"../../components/Index/TitleBlock\";\r\nimport GridAdSellLeases from \"../../components/GridList/GridAdSellLeases\";\r\nimport GridProject from \"../../components/GridList/GridProject\";\r\nimport LayeredNavigation from \"../../components/LayeredNavigation/LayeredNavigation\";\r\nimport TopLayered from \"../../components/LayeredNavigation/TopLayered\";\r\nimport { NextPage } from \"next\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport SearchKeyword from \"../../components/Search/KeywordSlide\";\r\nimport PaginationPage from \"../../components/Pagination/Pagination\";\r\nimport LoadingPage from \"../../components/Display/LoadingPage\";\r\nimport StringProcess from \"./../../modules/stringProcess\";\r\nimport Validator from \"../../modules/validator\";\r\nimport CategoryContent from \"../../components/Search/CategoryContent\";\r\nimport Router, { useRouter } from \"next/router\";\r\n//Import SCSS\r\nimport \"../../assets/scss/style.scss\";\r\nimport { apolloClient } from \"../../utils\";\r\nimport { GET_AD_SELL_LEASES } from \"../../graphql/ad_sell_leases/queries\";\r\nimport EmptyPage from \"../../components/Display/EmptyPage\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { useEffect } from \"react\";\r\nimport { GET_PROJECT_LIST } from \"../../graphql/project/queries\";\r\nimport { mainURL } from \"../../constants\";\r\nimport urlProcess from \"../../modules/urlProcess\";\r\n\r\ninterface AdSellLeasesListProps {\r\n  node: {\r\n    title: string;\r\n    description: string;\r\n    slug: string;\r\n    created_at: string;\r\n    updated_at: string;\r\n    price: {\r\n      unit: string;\r\n      value: string;\r\n    };\r\n    avatar: {\r\n      alt_text: string;\r\n      src: string;\r\n      description: string;\r\n    };\r\n    address: {\r\n      text: string;\r\n      ward: string;\r\n      district: string;\r\n      city: string;\r\n    };\r\n    contact: ContactProp;\r\n    area: {\r\n      unit: string;\r\n      value: string;\r\n    };\r\n  };\r\n}\r\n\r\ninterface ContactProp {\r\n  image: string;\r\n  name: string;\r\n  address: string;\r\n  mobile: string;\r\n  phone: string;\r\n  email: string;\r\n}\r\n\r\ninterface LocationItemProp {\r\n  id: string | null;\r\n  name: string | null;\r\n  title: string | null;\r\n  slug: string | null;\r\n  seo_title: string | null;\r\n  seo_description: string | null;\r\n  image: string | null;\r\n}\r\n\r\ninterface SearchPageProp {\r\n  location: {\r\n    city: LocationItemProp;\r\n    ward: LocationItemProp;\r\n    district: LocationItemProp;\r\n  };\r\n  dataQuery: DataQueryProp;\r\n  slug: string;\r\n  typePage: string;\r\n}\r\n\r\ninterface DataQueryProp {\r\n  city: string | null;\r\n  district: string | null;\r\n  ward: string | null;\r\n  home_direction: string | null;\r\n  price_range: RangeValue;\r\n  area_range: RangeValue;\r\n  bed_room_number: RangeValue;\r\n  title: string | null;\r\n  name: string | null;\r\n  page: number | null;\r\n  limit: number | null;\r\n  slug: string | null;\r\n  sort_by: AdSellLeaseSortType;\r\n}\r\n\r\ninterface RangeValue {\r\n  max: number;\r\n  min: number;\r\n}\r\n\r\ninterface AdSellLeaseSortType {\r\n  time?: \"newest\" | \"oldest\";\r\n  price?: \"low_to_high\" | \"high_to_low\";\r\n  view?: \"low_to_high\" | \"high_to_low\";\r\n  rate?: \"high_to_low\";\r\n}\r\n\r\ninterface ProjectListProp {\r\n  node: {\r\n    price: string;\r\n    name: string;\r\n    land_area: string;\r\n    slug: string;\r\n    created_at: string;\r\n    updated_at: string;\r\n    address: {\r\n      text: string;\r\n      ward: string;\r\n      district: string;\r\n      city: string;\r\n    };\r\n    cover_image: string;\r\n    intro_content: string;\r\n  };\r\n}\r\n\r\n// @ts-ignore\r\nconst MainSearchPage: NextPage<SearchPageProp> = (props: SearchPageProp) => {\r\n  //Define Query Data\r\n  const [queryFilter, setQueryFilter] = React.useState(\"'{}'\");\r\n  const [totalNumber, setTotalNumber] = React.useState(0);\r\n  const [isNextPage, setNextPage] = React.useState(false);\r\n  const [isPrevPage, setPrevPage] = React.useState(false);\r\n  const [statusLoading, setStatusLoading] = React.useState(false);\r\n  const [typeView, setTypeView] = React.useState(\"grid\");\r\n  //Search Data AdsellLease\r\n  const [searchDataAdSellLease, setSearchDataAdSellLease] = React.useState<AdSellLeasesListProps[]>([]);\r\n  //Search Data Project\r\n  const [searchDataProject, setSearchDataProject] = React.useState<ProjectListProp[]>([]);\r\n\r\n  //Layered Navigation Data\r\n  const [dataLayeredNavigation, setDataLayeredNavigation] = React.useState<DataQueryProp>(props.dataQuery);\r\n  const router = useRouter();\r\n  const updateLayeredNavigation = (data: DataQueryProp) => {\r\n    let valueString = getFilterString(data);\r\n    setDataLayeredNavigation(data);\r\n    setQueryFilter(valueString);\r\n    processRenderPage(1, null, valueString);\r\n    updateQueryString(data);\r\n  };\r\n\r\n  const updateQueryString = (data: DataQueryProp) => {\r\n    let queryString = processQueryUrl.processQueryUrl(data, props.typePage);\r\n    let slugAs = \"/nha-dat-ban\";\r\n    let urlProcess = \"/nha-dat-ban\";\r\n\r\n    if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\r\n      slugAs = \"/du-an-bat-dong-san\";\r\n      urlProcess = \"/du-an-bat-dong-san\";\r\n    }\r\n\r\n    if (data.slug && (props.typePage === \"ad-sell-lease-location\" || props.typePage === \"ad-sell-lease-index\")) {\r\n      urlProcess = urlProcess + \"/[slug]\";\r\n      slugAs = slugAs + \"/\" + data.slug;\r\n    }\r\n    if (queryString) {\r\n      slugAs = slugAs + \"?\" + queryString;\r\n    }\r\n    Router.push(urlProcess, slugAs, { shallow: false });\r\n  };\r\n\r\n  const getFilterString = (filterQuery: DataQueryProp) => {\r\n    let filterQueryProcess = processQueryUrl.processQueryString(filterQuery);\r\n    let valueString = JSON.stringify(filterQueryProcess);\r\n    valueString = valueString.split('\"').join(\"'\");\r\n    return valueString;\r\n  };\r\n\r\n  //First Render Data\r\n  useEffect(() => {\r\n    let valueString = getFilterString(props.dataQuery);\r\n    processRenderPage(props.dataQuery.page, null, valueString);\r\n  }, [props.dataQuery]);\r\n\r\n  //Process Render Page\r\n  const processRenderPage = (page: number | null, limit: number | null, filter: string | null) => {\r\n    setStatusLoading(true);\r\n    let queryFilterPrepare = filter ? filter : queryFilter;\r\n\r\n    let queryGraphQL = GET_AD_SELL_LEASES;\r\n    if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\r\n      queryGraphQL = GET_PROJECT_LIST;\r\n    }\r\n    apolloClient\r\n      .query({\r\n        query: queryGraphQL,\r\n        variables: {\r\n          page: dataLayeredNavigation.page,\r\n          limit: dataLayeredNavigation.limit,\r\n          filter: queryFilterPrepare,\r\n        },\r\n      })\r\n      .then((response) => {\r\n        setStatusLoading(false);\r\n        if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\r\n          //Set Search Data\r\n          if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.edges)) {\r\n            setSearchDataProject(response.data.projects.edges);\r\n          }\r\n          if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.edges)) {\r\n            setTotalNumber(response.data.projects.edges.length);\r\n          }\r\n          if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.projects.pageInfo.hasNextPage)) {\r\n            setNextPage(response.data.projects.pageInfo.hasNextPage);\r\n          }\r\n          if (\r\n            !Validator.isBlank(response.data) &&\r\n            !Validator.isBlank(response.data.projects.pageInfo.hasPreviousPage)\r\n          ) {\r\n            setPrevPage(response.data.projects.pageInfo.hasPreviousPage);\r\n          }\r\n\r\n          //If Blank\r\n          if (Validator.isBlank(response.data) || Validator.isBlank(response.data.projects.edges)) {\r\n            setSearchDataProject([]);\r\n            setTotalNumber(0);\r\n            setNextPage(false);\r\n            setPrevPage(false);\r\n          }\r\n        } else {\r\n          //Set Search Data\r\n          if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\r\n            setSearchDataAdSellLease(response.data.adSellLeases.edges);\r\n          }\r\n          if (!Validator.isBlank(response.data) && !Validator.isBlank(response.data.adSellLeases.edges)) {\r\n            setTotalNumber(response.data.adSellLeases.edges.length);\r\n          }\r\n          if (\r\n            !Validator.isBlank(response.data) &&\r\n            !Validator.isBlank(response.data.adSellLeases.pageInfo.hasNextPage)\r\n          ) {\r\n            setNextPage(response.data.adSellLeases.pageInfo.hasNextPage);\r\n          }\r\n          if (\r\n            !Validator.isBlank(response.data) &&\r\n            !Validator.isBlank(response.data.adSellLeases.pageInfo.hasPreviousPage)\r\n          ) {\r\n            setPrevPage(response.data.adSellLeases.pageInfo.hasPreviousPage);\r\n          }\r\n\r\n          //If Blank\r\n          if (Validator.isBlank(response.data) || Validator.isBlank(response.data.adSellLeases.edges)) {\r\n            setSearchDataAdSellLease([]);\r\n            setTotalNumber(0);\r\n            setNextPage(false);\r\n            setPrevPage(false);\r\n          }\r\n        }\r\n      });\r\n  };\r\n\r\n  //Process Open Left Layered Navigation\r\n  const [state, setState] = React.useState({\r\n    top: false,\r\n    left: false,\r\n    bottom: false,\r\n    right: false,\r\n  });\r\n  // @ts-ignore\r\n  const toggleDrawer = (side: string, open: boolean) => (event) => {\r\n    if (event.type === \"keydown\" && (event.key === \"Tab\" || event.key === \"Shift\")) {\r\n      return;\r\n    }\r\n    setState({ ...state, [side]: open });\r\n  };\r\n\r\n  // @ts-ignore\r\n  const handleOpenPopup = () => {\r\n    setState({ ...state, [\"right\"]: true });\r\n  };\r\n\r\n  // change view grid, list\r\n  const onChangeView = (type: string) => {\r\n    setTypeView(type);\r\n  };\r\n\r\n  //Process Next Page, Previous Page\r\n  const onNextPage = () => {\r\n    let nextPage = Number(dataLayeredNavigation.page) + 1;\r\n    dataLayeredNavigation.page = nextPage;\r\n    setDataLayeredNavigation(dataLayeredNavigation);\r\n    processRenderPage(nextPage, null, null);\r\n    updateQueryString(dataLayeredNavigation);\r\n  };\r\n\r\n  const onPrevPage = () => {\r\n    let previousPage = Number(dataLayeredNavigation.page) - 1;\r\n    if (previousPage >= 1) {\r\n      dataLayeredNavigation.page = previousPage;\r\n      setDataLayeredNavigation(dataLayeredNavigation);\r\n      processRenderPage(previousPage, null, null);\r\n      updateQueryString(dataLayeredNavigation);\r\n    }\r\n  };\r\n\r\n  //Prepare and Filter Location\r\n  let locationItem = {\r\n    id: null,\r\n    name: null,\r\n    title: null,\r\n    slug: null,\r\n    seo_title: null,\r\n    description: null,\r\n    seo_description: null,\r\n    image: null,\r\n  };\r\n  if (!Validator.isBlank(props.location.city) && !Validator.isBlank(props.location.city.id)) {\r\n    locationItem = Object.assign(locationItem, props.location.city);\r\n  }\r\n  if (!Validator.isBlank(props.location.district) && !Validator.isBlank(props.location.district.id)) {\r\n    locationItem = Object.assign(locationItem, props.location.district);\r\n  }\r\n  if (!Validator.isBlank(props.location.ward) && !Validator.isBlank(props.location.ward.id)) {\r\n    locationItem = Object.assign(locationItem, props.location.ward);\r\n  }\r\n\r\n  //Prepare page content\r\n  let titlePage = \"\";\r\n  let descriptionPage = \"\";\r\n  let heading = \"\";\r\n\r\n  if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\r\n    if (!Validator.isBlank(locationItem.name)) {\r\n      if (!Validator.isBlank(locationItem.seo_title)) {\r\n        titlePage = String(locationItem.seo_title);\r\n      } else {\r\n        titlePage = \"Dự án tại \" + locationItem.name + \" năm 2020\";\r\n      }\r\n      if (!Validator.isBlank(locationItem.title)) {\r\n        heading = String(locationItem.title);\r\n      } else {\r\n        heading = \"Dự án tại \" + locationItem.name;\r\n      }\r\n      if (!Validator.isBlank(locationItem.seo_description)) {\r\n        descriptionPage = String(locationItem.seo_description);\r\n      } else {\r\n        descriptionPage = \"\";\r\n      }\r\n    } else {\r\n      titlePage = \"Tin tức dự án bất động sản toàn quốc đầy đủ, cập nhật nhất\";\r\n      heading = \"Tìm dự án\";\r\n      descriptionPage =\r\n        \"Nhà Đất Mới cập nhật liên tục tất cả dự án bất động sản trên toàn quốc với đầy đủ thông tin về quy mô, mức giá, tiến độ và đánh giá tiềm năng phát triển.\";\r\n    }\r\n  } else {\r\n    if (!Validator.isBlank(locationItem.name)) {\r\n      if (!Validator.isBlank(locationItem.seo_title)) {\r\n        titlePage = String(locationItem.seo_title);\r\n      } else {\r\n        titlePage = \"Mua bán nhà tại \" + locationItem.name + \" năm 2020\";\r\n      }\r\n      if (!Validator.isBlank(locationItem.title)) {\r\n        heading = String(locationItem.title);\r\n      } else {\r\n        heading = \"Mua bán nhà tại \" + locationItem.name;\r\n      }\r\n      if (!Validator.isBlank(locationItem.seo_description)) {\r\n        descriptionPage = String(locationItem.seo_description);\r\n      } else {\r\n        descriptionPage = \"\";\r\n      }\r\n    } else {\r\n      titlePage = \"Tin rao bất động sản uy tín nhất hiện nay - Nhà Đất Mới\";\r\n      heading = \"Tìm tin rao\";\r\n      descriptionPage =\r\n        \"Website đăng tin, mua bán bất động sản uy tín, nhanh chóng và hiệu quả. 100% tin rao trên toàn quốc đều được kiểm chứng và xác thực bởi hệ thống thông minh.\";\r\n    }\r\n  }\r\n\r\n  let pathString = \"nha-dat-ban\";\r\n  if (props.typePage !== \"ad-sell-lease-location\" && props.typePage !== \"ad-sell-lease-index\") {\r\n    pathString = \"du-an-bat-dong-san\";\r\n  }\r\n  let canonicalTag = mainURL + \"/\" + pathString;\r\n  if (props.slug) {\r\n    canonicalTag = canonicalTag + \"/\" + props.slug;\r\n  }\r\n\r\n  let imageAvatar = \"https://static.nhadatmoi.net/default/home_default.jpg\";\r\n  if (locationItem.image) {\r\n    let imageString = String(locationItem.image);\r\n    imageAvatar = urlProcess.processImageUrl(imageString, \"\");\r\n  }\r\n\r\n  const freshText = (input: string) => {\r\n    input = StringProcess.stripProperties(input, []);\r\n    input = StringProcess.stripTags(input, \"\");\r\n    input = input.replace(/&nbsp;/g, \" \");\r\n    return input;\r\n  };\r\n  const convertDescription = (input: string) => {\r\n    return input.replace(/&#(\\d+);/g, function (match, dec) {\r\n      return String.fromCharCode(dec);\r\n    });\r\n  };\r\n\r\n  if (locationItem.description && (descriptionPage === \"\" || !descriptionPage)) {\r\n    let textToReplace = String(locationItem.description);\r\n    descriptionPage = freshText(textToReplace);\r\n    descriptionPage = convertDescription(descriptionPage);\r\n    descriptionPage = StringProcess.truncateString(descriptionPage, 255, \"\");\r\n  }\r\n\r\n  // @ts-ignore\r\n  return (\r\n    <Layout\r\n      title={titlePage}\r\n      description={descriptionPage}\r\n      {...props}\r\n      image={imageAvatar}\r\n      canonical={canonicalTag}\r\n      path={pathString}\r\n    >\r\n      <div className=\"body_container\">\r\n        <Hidden smDown>\r\n          {/* <LayeredNavigation\r\n            className=\"search_layered\"\r\n            updateLayeredNavigation={updateLayeredNavigation}\r\n            dataLayeredNavigation={dataLayeredNavigation}\r\n          /> */}\r\n        </Hidden>\r\n        <Drawer anchor=\"right\" open={state.right} onClose={toggleDrawer(\"right\", false)}>\r\n          <LayeredNavigation\r\n            className=\"search_layered\"\r\n            updateLayeredNavigation={updateLayeredNavigation}\r\n            dataLayeredNavigation={dataLayeredNavigation}\r\n          />\r\n        </Drawer>\r\n        <Grid item className=\"search_body border\">\r\n          <TitleBlock\r\n            title={heading}\r\n            description={\"Hiển thị \" + StringProcess.addCommas(Number(totalNumber).toString()) + \" kết quả\"}\r\n            type={\"h1\"}\r\n            path={\"\"}\r\n          />\r\n          <TopLayered\r\n            onChangeView={(type) => onChangeView(type)}\r\n            className=\"top_layered\"\r\n            onOpen={() => handleOpenPopup()}\r\n            updateLayeredNavigation={updateLayeredNavigation}\r\n            dataLayeredNavigation={dataLayeredNavigation}\r\n          />\r\n\r\n          {statusLoading && (\r\n            <LoadingPage className=\"loading_page\" grid={{ xl: 3, lg: 4, md: 6, sm: 6, xs: 12 }} numberLimit={12} />\r\n          )}\r\n\r\n          {!statusLoading &&\r\n            searchDataAdSellLease.length == 0 &&\r\n            (props.typePage === \"ad-sell-lease-location\" || props.typePage === \"ad-sell-lease-index\") && (\r\n              <EmptyPage\r\n                title=\"Không tìm thấy kết quả nào\"\r\n                description=\"Vui lòng sử dụng từ khóa khác hoặc sử dụng bộ lọc nâng cao để tìm kiếm kết quả phù hợp\"\r\n              />\r\n            )}\r\n\r\n          {!statusLoading && searchDataProject.length == 0 && props.typePage === \"project-index\" && (\r\n            <EmptyPage\r\n              title=\"Không tìm thấy kết quả nào\"\r\n              description=\"Vui lòng sử dụng từ khóa khác hoặc sử dụng bộ lọc nâng cao để tìm kiếm kết quả phù hợp\"\r\n            />\r\n          )}\r\n\r\n          {!statusLoading &&\r\n            searchDataAdSellLease.length > 0 &&\r\n            (props.typePage === \"ad-sell-lease-location\" || props.typePage === \"ad-sell-lease-index\") && (\r\n              <div>\r\n                <GridAdSellLeases\r\n                  grid={{ xl: 3, lg: 4, md: 6, sm: 6, xs: 12 }}\r\n                  gridData={searchDataAdSellLease}\r\n                  className=\"grid__list\"\r\n                  typeView={typeView}\r\n                />\r\n                {/* <PaginationPage\r\n              isNextPage={isNextPage}\r\n              isPrevPage={isPrevPage}\r\n              currentPage={2}\r\n              onNextPage={onNextPage}\r\n              onPrevPage={onPrevPage}\r\n            /> */}\r\n              </div>\r\n            )}\r\n          {!statusLoading && searchDataProject.length > 0 && props.typePage === \"project-index\" && (\r\n            <div>\r\n              <GridProject\r\n                grid={{ xl: 3, lg: 4, md: 6, sm: 6, xs: 12 }}\r\n                gridData={searchDataProject}\r\n                className=\"grid__list\"\r\n                typeView={typeView}\r\n              />\r\n              <PaginationPage\r\n                isNextPage={isNextPage}\r\n                isPrevPage={isPrevPage}\r\n                currentPage={2}\r\n                onNextPage={onNextPage}\r\n                onPrevPage={onPrevPage}\r\n              />\r\n            </div>\r\n          )}\r\n          <CategoryContent description={locationItem.description} />\r\n          <SearchKeyword />\r\n        </Grid>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default MainSearchPage;\r\n"]},"metadata":{},"sourceType":"module"}