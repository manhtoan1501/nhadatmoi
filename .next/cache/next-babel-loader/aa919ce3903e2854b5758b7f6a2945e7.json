{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nvar _jsxFileName = \"C:\\\\Users\\\\manh nhan\\\\Desktop\\\\Nhadatmoi\\\\components\\\\Search\\\\SmartSearch.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { Button, Typography, Grid } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Validator from \"../../modules/validator\";\nimport SearchIcon from '@material-ui/icons/Search';\nimport { localStorageSearch } from \"../../constants\";\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { apolloClient } from \"../../utils\";\nimport { GET_PROJECT_LIST_NAME } from \"../../graphql/project/queries\";\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nconst useStyles = makeStyles(theme => createStyles({\n  root: {\n    display: 'flex'\n  },\n  paper: {\n    marginRight: theme.spacing(2)\n  },\n  fontMenuItem: {\n    fontWeight: 900,\n    fontSize: 15\n  },\n  fontColorMenuItem: {\n    color: \"red\",\n    fontWeight: 900,\n    fontSize: 15\n  }\n}));\nconst theme = createMuiTheme({\n  overrides: {\n    MuiMenuItem: {\n      root: {\n        width: 450\n      }\n    }\n  }\n});\nconst projectHot = [{\n  title: \"Vinhomes Central Park\"\n}, {\n  title: \"Vinhomes Grand Park\"\n}, {\n  title: \"Vinhomes Smart City\"\n}, {\n  title: \"Nhà Đất Hải Phòng\"\n}, {\n  title: \"Nhà Đất Hà Nội\"\n}];\nlet dataSearch = new Array();\n\nconst MenuListComposition = () => {\n  const classes = useStyles();\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: valueSearch,\n    1: setValueSearch\n  } = useState(\"\");\n  const anchorRef = React.useRef(null);\n  const {\n    0: projectSearch,\n    1: setProjectSearch\n  } = useState();\n\n  const handleToggle = () => {\n    setOpen(prevOpen => !prevOpen);\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === 'Tab') {\n      event.preventDefault();\n      setOpen(false);\n    }\n  }\n\n  const removeLocalSearch = () => {\n    localStorage.removeItem(localStorageSearch);\n    setOpen(false);\n    setValueSearch(\"\");\n  };\n\n  const prevOpen = React.useRef(open);\n  useEffect(() => {\n    dataSearch = JSON.parse(localStorage.getItem(localStorageSearch));\n    if (!_Array$isArray(dataSearch)) dataSearch = [];\n\n    if (!Validator.isBlank(localStorage.getItem(localStorageSearch))) {\n      localStorage.setItem(localStorageSearch, _JSON$stringify(dataSearch));\n    }\n\n    if (prevOpen.current === true && open === false) {// anchorRef.current.focus();\n    }\n\n    prevOpen.current = open;\n  }, [open]);\n\n  const onBlur = e => {\n    if (!_Array$isArray(dataSearch)) dataSearch = [];\n\n    if (e.target.value) {\n      let checkExist = false;\n      dataSearch.map(item => {\n        if (item && item.title === e.target.value) {\n          checkExist = true;\n        }\n      });\n\n      if (!checkExist || dataSearch.length == 0) {\n        dataSearch.unshift({\n          title: e.target.value\n        });\n      }\n\n      if (dataSearch.length >= 4) {\n        dataSearch.splice(3, 1);\n      }\n\n      localStorage.setItem(localStorageSearch, _JSON$stringify(dataSearch));\n    }\n  };\n\n  const onClickSearch = (title, index) => {\n    setValueSearch(title);\n    setOpen(false);\n  };\n\n  const onChangeSearch = e => {\n    setValueSearch(e.target.value);\n    let filterObject = {\n      name: e.target.value\n    };\n\n    let dataFilter = _JSON$stringify(filterObject);\n\n    apolloClient.query({\n      query: GET_PROJECT_LIST_NAME,\n      variables: {\n        \"page\": 1,\n        \"limit\": 5,\n        \"filter\": dataFilter\n      }\n    }).then(response => {\n      setProjectSearch(response.data.projects.edges);\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, __jsx(ThemeProvider, {\n    theme: theme,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    justify: \"flex-start\",\n    alignItems: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    xs: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, __jsx(TextField, {\n    fullWidth: true // id=\"outlined-basic\" \n    ,\n    variant: \"outlined\",\n    onChange: e => onChangeSearch(e),\n    onBlur: e => onBlur(e),\n    value: valueSearch,\n    autoComplete: \"off\",\n    ref: anchorRef,\n    margin: \"dense\",\n    onClick: handleToggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  })), __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, __jsx(Button, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, __jsx(SearchIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }), \"T\\xECm ki\\u1EBFm\")), __jsx(Grid, {\n    item: true,\n    xs: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, __jsx(Popper, {\n    open: open,\n    anchorEl: anchorRef.current,\n    role: undefined,\n    transition: true,\n    disablePortal: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, ({\n    TransitionProps,\n    placement\n  }) => __jsx(Grow, _extends({}, TransitionProps, {\n    style: {\n      transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }), __jsx(Paper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, __jsx(ClickAwayListener, {\n    onClickAway: () => setOpen(false),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, __jsx(MenuList, {\n    autoFocusItem: open,\n    id: \"menu-list-grow\",\n    onKeyDown: handleListKeyDown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, valueSearch && _Array$isArray(projectSearch) ? __jsx(React.Fragment, null, projectSearch.map((item, index) => __jsx(MenuItem, {\n    key: index,\n    onClick: () => onClickSearch(item.node.name, index),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, item.node.name))) : __jsx(React.Fragment, null, __jsx(MenuItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, __jsx(Typography, {\n    className: classes.fontMenuItem,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"T\\u1EEA KH\\xD3A HOT\")), projectHot.map((item, index) => __jsx(MenuItem, {\n    key: index,\n    onClick: () => onClickSearch(item.title, index),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, item.title)), __jsx(MenuItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, __jsx(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, \"L\\u1ECACH S\\u1EEC T\\xCCM KI\\u1EBEM\"), __jsx(Typography, {\n    className: classes.fontColorMenuItem,\n    onClick: removeLocalSearch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \"X\\xF3a\")), dataSearch.map((item, index) => __jsx(MenuItem, {\n    key: index,\n    onClick: () => onClickSearch(item.title, index),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, item.title))))))))))));\n};\n\nexport default MenuListComposition;","map":{"version":3,"sources":["C:/Users/manh nhan/Desktop/Nhadatmoi/components/Search/SmartSearch.tsx"],"names":["React","useEffect","useState","Button","Typography","Grid","TextField","ClickAwayListener","Grow","Paper","Popper","MenuItem","MenuList","Validator","SearchIcon","localStorageSearch","createMuiTheme","ThemeProvider","apolloClient","GET_PROJECT_LIST_NAME","makeStyles","createStyles","useStyles","theme","root","display","paper","marginRight","spacing","fontMenuItem","fontWeight","fontSize","fontColorMenuItem","color","overrides","MuiMenuItem","width","projectHot","title","dataSearch","Array","MenuListComposition","classes","open","setOpen","valueSearch","setValueSearch","anchorRef","useRef","projectSearch","setProjectSearch","handleToggle","prevOpen","handleListKeyDown","event","key","preventDefault","removeLocalSearch","localStorage","removeItem","JSON","parse","getItem","isBlank","setItem","current","onBlur","e","target","value","checkExist","map","item","length","unshift","splice","onClickSearch","index","onChangeSearch","filterObject","name","dataFilter","query","variables","then","response","data","projects","edges","undefined","TransitionProps","placement","transformOrigin","node"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, FunctionComponent } from 'react';\r\nimport { Button, Typography, Grid, Icon } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport Validator from \"../../modules/validator\";\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport {localStorageSearch} from \"../../constants\";\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport {apolloClient} from \"../../utils\";\r\nimport {GET_PROJECT_LIST_NAME} from \"../../graphql/project/queries\";\r\nimport {makeStyles, createStyles, Theme} from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: 'flex',\r\n    },\r\n    paper: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    fontMenuItem: {\r\n      fontWeight: 900,\r\n      fontSize: 15,\r\n    },\r\n    fontColorMenuItem: {\r\n      color: \"red\",\r\n      fontWeight: 900,\r\n      fontSize: 15,\r\n    },\r\n  }),\r\n)\r\n\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiMenuItem: { \r\n      root: {\r\n        width: 450,\r\n      }\r\n    }\r\n  },\r\n});\r\n\r\nconst projectHot = [\r\n  { title: \"Vinhomes Central Park\" },\r\n  { title: \"Vinhomes Grand Park\" },\r\n  { title: \"Vinhomes Smart City\" },\r\n  { title: \"Nhà Đất Hải Phòng\" },\r\n  { title: \"Nhà Đất Hà Nội\" }\r\n]\r\n\r\ninterface DataSearchServerQuery  {\r\n  edges: {\r\n    node: {\r\n      name: string\r\n    }\r\n  }[],\r\n}\r\n\r\nlet dataSearch = new Array()\r\nconst MenuListComposition: FunctionComponent = () => {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [valueSearch, setValueSearch] = useState(\"\");\r\n  const anchorRef = React.useRef(null);\r\n  const [projectSearch, setProjectSearch] = useState<DataSearchServerQuery>();\r\n  const handleToggle = () => {\r\n    setOpen(prevOpen => !prevOpen);\r\n  }\r\n\r\n  function handleListKeyDown(event: any) {\r\n    if (event.key === 'Tab') {\r\n      event.preventDefault();\r\n      setOpen(false);\r\n    }\r\n  }\r\n\r\n  const removeLocalSearch = () => {\r\n    localStorage.removeItem(localStorageSearch)\r\n    setOpen(false)\r\n    setValueSearch(\"\")\r\n  }\r\n\r\n  const prevOpen = React.useRef(open)\r\n  useEffect(() => {\r\n    dataSearch = JSON.parse(localStorage.getItem(localStorageSearch) as string)\r\n    if(!Array.isArray(dataSearch)) dataSearch = []\r\n    if(!Validator.isBlank(localStorage.getItem(localStorageSearch))) {\r\n      localStorage.setItem(localStorageSearch, JSON.stringify(dataSearch))\r\n    } \r\n    if (prevOpen.current === true && open === false) {\r\n      // anchorRef.current.focus();\r\n    }\r\n    prevOpen.current = open\r\n  }, [open])\r\n\r\n  const onBlur = (e: any) => {\r\n    if(!Array.isArray(dataSearch)) dataSearch = []\r\n    if(e.target.value){\r\n      let checkExist = false\r\n      dataSearch.map(item => {\r\n        if(item && item.title === e.target.value) {\r\n          checkExist = true\r\n        }\r\n      })\r\n      \r\n      if(!checkExist || dataSearch.length == 0){\r\n        dataSearch.unshift({ title: e.target.value})\r\n      }\r\n      if(dataSearch.length >= 4){\r\n        dataSearch.splice(3, 1)        \r\n      }\r\n      localStorage.setItem(localStorageSearch, JSON.stringify(dataSearch))\r\n    }\r\n  }\r\n  \r\n  const onClickSearch = (title: string, index: number) => {\r\n    setValueSearch(title)\r\n    setOpen(false)\r\n  }\r\n\r\n  const onChangeSearch = (e: any) => {\r\n    setValueSearch(e.target.value)\r\n    let filterObject = { name: e.target.value }\r\n    let dataFilter = JSON.stringify(filterObject)\r\n    apolloClient.query({query: GET_PROJECT_LIST_NAME, variables: {\r\n      \"page\": 1,\r\n      \"limit\": 5,\r\n      \"filter\": dataFilter\r\n    }}).then(response => { \r\n      setProjectSearch(response.data.projects.edges)\r\n    })\r\n  }\r\n  return (\r\n    <div className={classes.root}>\r\n      <ThemeProvider theme={theme}> \r\n        <Grid container spacing={1} justify=\"flex-start\" alignItems=\"center\">\r\n          <Grid item xs={4}>\r\n            <TextField\r\n              fullWidth={true}\r\n              // id=\"outlined-basic\" \r\n              variant=\"outlined\"\r\n              onChange={(e: any) => onChangeSearch(e)}\r\n              onBlur={(e: any) => onBlur(e)}\r\n              value={valueSearch}\r\n              autoComplete=\"off\"\r\n              ref={anchorRef}\r\n              margin=\"dense\"\r\n              onClick={handleToggle}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Button><SearchIcon />Tìm kiếm</Button>\r\n          </Grid>\r\n          <Grid item xs={2}></Grid>\r\n          <Grid item xs={12}>\r\n            <Popper open={open} anchorEl={anchorRef.current} role={undefined} transition disablePortal>\r\n                {({ TransitionProps, placement }) => (\r\n                  <Grow {...TransitionProps} style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }} >\r\n                    <Paper>\r\n                      <ClickAwayListener onClickAway={() => setOpen(false)}>\r\n                        <MenuList autoFocusItem={open} id=\"menu-list-grow\" onKeyDown={handleListKeyDown}>\r\n                          {valueSearch && Array.isArray(projectSearch)\r\n                            ? <>\r\n                              {projectSearch.map((item: any, index: number) => \r\n                                <MenuItem key={index} onClick={() => onClickSearch(item.node.name, index)}>\r\n                                  {item.node.name}\r\n                                </MenuItem>)\r\n                                } \r\n                              </>\r\n                            : <>\r\n                                {<MenuItem>\r\n                                  <Typography className={classes.fontMenuItem}>\r\n                                    TỪ KHÓA HOT\r\n                                  </Typography>\r\n                                  </MenuItem>\r\n                                }\r\n                                {projectHot.map((item: any, index: number) => \r\n                                <MenuItem key={index} onClick={() => onClickSearch(item.title, index)}>{item.title}</MenuItem>)}\r\n                                <MenuItem>\r\n                                  <Typography>\r\n                                    LỊCH SỬ TÌM KIẾM\r\n                                  </Typography>\r\n                                  <Typography className={classes.fontColorMenuItem} onClick={removeLocalSearch}>\r\n                                    Xóa\r\n                                  </Typography>\r\n                                </MenuItem>\r\n                                {dataSearch.map((item: any, index: number) =>\r\n                                  <MenuItem key={index} onClick={() => onClickSearch(item.title, index)}>{item.title} \r\n                                  </MenuItem>)}\r\n                              </>\r\n                          }\r\n                        </MenuList>\r\n                      </ClickAwayListener>\r\n                    </Paper>\r\n                  </Grow>\r\n                )}\r\n              </Popper>\r\n          </Grid>\r\n        </Grid>\r\n      </ThemeProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MenuListComposition\r\n"]},"metadata":{},"sourceType":"module"}