{"ast":null,"code":"import _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\manh nhan\\\\Desktop\\\\new_ndm\\\\components\\\\Channel\\\\Header.tsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Avatar } from \"@material-ui/core\";\nimport { headerStyles } from './Constant';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport { FOLLOW_CHANNEL, UN_FOLLOWED_CHANNEL } from \"../../graphql/channel/mutation\";\nimport { apolloClient } from \"../../utils\";\nimport _ from \"lodash\";\n;\n;\n\nvar Header = function Header(props) {\n  var classes = headerStyles();\n  var avatar = \"https://sf.co.ua/14/07/wallpaper-117233.jpg\"; // \"https://news.mogi.vn/wp-content/uploads/2018/08/anh-nha-dep-13.jpg\"\n\n  var follow_value = _.get(props, \"channel.follow_value\", \"\");\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      followValue = _React$useState2[0],\n      setFollowValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      checkFollow = _React$useState4[0],\n      setCheckFollow = _React$useState4[1];\n\n  var addFollow = function addFollow() {\n    var follow;\n    return _regeneratorRuntime.async(function addFollow$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setFollowValue(follow_value + 1);\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(apolloClient.mutate({\n              mutation: FOLLOW_CHANNEL,\n              variables: {\n                \"input\": {\n                  \"id\": _.get(props, \"channel.id\", \"\")\n                }\n              }\n            }).then(function (response) {\n              setCheckFollow(true);\n            }));\n\n          case 3:\n            follow = _context.sent;\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, _Promise);\n  };\n\n  var unFollowed = function unFollowed() {\n    var follow;\n    return _regeneratorRuntime.async(function unFollowed$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setFollowValue(follow_value - 1);\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(apolloClient.mutate({\n              mutation: UN_FOLLOWED_CHANNEL,\n              variables: {\n                \"input\": {\n                  \"id\": _.get(props, \"channel.id\", \"\")\n                }\n              }\n            }).then(function (response) {\n              setCheckFollow(false);\n            }));\n\n          case 3:\n            follow = _context2.sent;\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, _Promise);\n  };\n\n  var follow = followValue || follow_value;\n\n  var followers = _.get(props, \"channel.followers\", \"\");\n\n  var check = false;\n\n  if (_Array$isArray(followers)) {\n    followers.map(function (item) {\n      if (props.userLogin == item.user_id) {\n        check = true;\n      }\n    });\n  }\n\n  ;\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.cover,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: classes.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.contentWidth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.channelAvatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, __jsx(Avatar, {\n    src: avatar,\n    className: classes.sideAvatar,\n    alt: \"ndm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: classes.titleChannel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    className: classes.contentTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, _.get(props, \"channel.name\", \"\"), \"kenh giai tri kenh giai tri ken iai tri kenh giai tri kenh giai tri kenh giai tri ken iai tri kenh giai tri kenh giai tri kenh giai tri ken iai tri kenh giai tri\"), __jsx(\"div\", {\n    style: {\n      color: \"#444\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, follow > 0 ? follow : 0, \" l\\u01B0\\u1EE3t theo d\\xF5i\", _.get(props, \"channel.official_status\", \"\") ? __jsx(CheckCircleIcon, {\n    className: classes.checkOfficial,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }) : \"\")), __jsx(\"div\", {\n    style: {\n      \"float\": \"right\",\n      width: \"200px\",\n      height: \"20px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, checkFollow || check ? __jsx(\"button\", {\n    onClick: function onClick() {\n      return unFollowed();\n    },\n    style: {\n      marginTop: '30px',\n      width: \"100%\",\n      height: '40px',\n      border: \"2px solid #045EA8\",\n      borderRadius: \"4px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"B\\u1ECF theo d\\xF5i\") : __jsx(\"button\", {\n    onClick: function onClick() {\n      return addFollow();\n    },\n    style: {\n      marginTop: '30px',\n      width: \"100%\",\n      height: '40px',\n      border: \"2px solid #045EA8\",\n      borderRadius: \"4px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Theo d\\xF5i\")), __jsx(\"div\", {\n    style: {\n      clear: \"both\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }))));\n};\n\nexport default Header;","map":{"version":3,"sources":["C:/Users/manh nhan/Desktop/new_ndm/components/Channel/Header.tsx"],"names":["React","Avatar","headerStyles","CheckCircleIcon","FOLLOW_CHANNEL","UN_FOLLOWED_CHANNEL","apolloClient","_","Header","props","classes","avatar","follow_value","get","useState","followValue","setFollowValue","checkFollow","setCheckFollow","addFollow","mutate","mutation","variables","then","response","follow","unFollowed","followers","check","map","item","userLogin","user_id","cover","container","contentWidth","channelAvatar","sideAvatar","titleChannel","contentTitle","color","checkOfficial","width","height","marginTop","border","borderRadius","clear"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Avatar, Typography, Button, Grid } from \"@material-ui/core\";\r\nimport { headerStyles } from './Constant';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport { FOLLOW_CHANNEL, UN_FOLLOWED_CHANNEL } from \"../../graphql/channel/mutation\";\r\nimport { apolloClient } from \"../../utils\";\r\nimport _ from \"lodash\";\r\n\r\ninterface HeaderProps {\r\n  userLogin: string\r\n  slug: string\r\n  channel: ChannelProp\r\n};\r\n\r\ninterface ChannelProp {\r\n  id: string\r\n  name: string\r\n  slug: string\r\n  avatar: string\r\n  cover: string\r\n  description: string\r\n  nation: string\r\n  language: string\r\n  telephone: string\r\n  address: string\r\n  facebook: string\r\n  youtube: string\r\n  website: string\r\n  official_status: number\r\n  follow_value: number\r\n  followers: {\r\n    user_id: string\r\n  }[]\r\n  created_at: string\r\n};\r\n\r\nconst Header: React.FunctionComponent<HeaderProps> = (props: HeaderProps) => {\r\n  const classes = headerStyles();\r\n  const avatar = \"https://sf.co.ua/14/07/wallpaper-117233.jpg\"; // \"https://news.mogi.vn/wp-content/uploads/2018/08/anh-nha-dep-13.jpg\"\r\n  let follow_value = _.get(props, \"channel.follow_value\", \"\");\r\n  let [followValue, setFollowValue] = React.useState(0);\r\n  const [checkFollow, setCheckFollow] = React.useState(false);\r\n\r\n  const addFollow = async ()=> { \r\n    setFollowValue(follow_value + 1 )\r\n    let follow = await apolloClient.mutate({ mutation: FOLLOW_CHANNEL, variables: {\r\n      \"input\": {\r\n        \"id\": _.get(props, \"channel.id\", \"\")\r\n      }\r\n    }})\r\n    .then((response: any) => {\r\n      setCheckFollow(true)\r\n    });\r\n  };\r\n\r\n  const unFollowed = async ()=> { \r\n    setFollowValue(follow_value - 1)\r\n    let follow = await apolloClient.mutate({ mutation: UN_FOLLOWED_CHANNEL, variables: {\r\n      \"input\": {\r\n        \"id\": _.get(props, \"channel.id\", \"\")\r\n      }\r\n    }})\r\n    .then((response: any) => {\r\n      setCheckFollow(false)\r\n    });\r\n  };\r\n\r\n  let follow = followValue || follow_value;\r\n  let followers = _.get(props, \"channel.followers\", \"\");\r\n  let check = false;\r\n  if(Array.isArray(followers)) {\r\n    followers.map((item: any) => {\r\n      if(props.userLogin == item.user_id) {\r\n        check = true\r\n      }\r\n    })\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className={classes.cover}></div>\r\n      <div className={classes.container}>\r\n        <div className={classes.contentWidth}>\r\n          <div className={classes.channelAvatar}>\r\n            <Avatar src={avatar} className={classes.sideAvatar} alt=\"ndm\"/> \r\n          </div>\r\n          <div className={classes.titleChannel}>\r\n            <p className={classes.contentTitle}>\r\n            {_.get(props, \"channel.name\", \"\")} \r\n              kenh giai tri kenh giai tri ken iai tri kenh giai tri kenh giai tri kenh giai tri ken iai tri kenh giai tri kenh giai tri kenh giai tri ken iai tri kenh giai tri\r\n              </p>\r\n            <div\r\n              style={{\r\n                color: \"#444\",\r\n              }}\r\n            >\r\n              {follow > 0 ? follow : 0} lượt theo dõi\r\n              { _.get(props, \"channel.official_status\", \"\") ? <CheckCircleIcon className={classes.checkOfficial}/> : \"\"} \r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ float: \"right\", width: \"200px\", height: \"20px\"  }}>\r\n            {checkFollow || check\r\n              ? <button  onClick={() => unFollowed()} style={{ marginTop: '30px', width: \"100%\", height: '40px', border: \"2px solid #045EA8\", borderRadius: \"4px\"}}>Bỏ theo dõi</button>\r\n              : <button onClick={() => addFollow()} style={{ marginTop: '30px', width: \"100%\", height: '40px', border: \"2px solid #045EA8\",  borderRadius: \"4px\" }} >Theo dõi</button>  \r\n            }\r\n          </div>\r\n          <div style={{ clear: \"both\" }}></div>\r\n        </div>\r\n        \r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default Header;\r\n"]},"metadata":{},"sourceType":"module"}