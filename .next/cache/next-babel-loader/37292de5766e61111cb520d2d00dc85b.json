{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\manh nhan\\\\Desktop\\\\new_ndm\\\\components\\\\Channel\\\\Header.tsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Avatar, Typography, Button, Grid } from \"@material-ui/core\";\nimport { headerStyles } from './Constant';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport { FOLLOW_CHANNEL, UNFOLLOW_CHANNEL } from \"../../graphql/channel/mutation\";\nimport { GET_AVERAGE_RATING } from \"../../graphql/channel/queries\";\nimport { apolloClient } from \"../../utils\";\nimport _ from \"lodash\";\n\nconst Header = props => {\n  const classes = headerStyles();\n  const avatar = \"https://sf.co.ua/14/07/wallpaper-117233.jpg\"; // \"https://news.mogi.vn/wp-content/uploads/2018/08/anh-nha-dep-13.jpg\"\n\n  const [averageRating, setAverageRating] = React.useState();\n\n  let follow_value = _.get(props, \"channel.follow_value\", \"\");\n\n  let [followValue, setFollowValue] = React.useState(0);\n\n  const addFollow = async () => {\n    let follow = await apolloClient.mutate({\n      mutation: FOLLOW_CHANNEL,\n      variables: {\n        \"input\": {\n          \"id\": _.get(props, \"channel.id\", \"\")\n        }\n      }\n    }).then(response => {\n      setFollowValue(follow_value + 1);\n    });\n  };\n\n  const unfollow = async () => {\n    let follow = await apolloClient.mutate({\n      mutation: UNFOLLOW_CHANNEL,\n      variables: {\n        \"input\": {\n          \"id\": _.get(props, \"channel.id\", \"\")\n        }\n      }\n    }).then(response => {\n      setFollowValue(follow_value - 1);\n    });\n  };\n\n  const getAverage = async () => {\n    let follow = await apolloClient.mutate({\n      mutation: GET_AVERAGE_RATING,\n      variables: {\n        \"id\": _.get(props, \"channel.id\", \"\")\n      }\n    }).then(response => {\n      console.log(\"response\", response);\n\n      let averrageRating = _.get(response, \"data.channelAverageRatings\", \"\");\n\n      setAverageRating(averrageRating);\n    });\n  };\n\n  React.useEffect(() => {\n    getAverage();\n  });\n  const follow = followValue || follow_value;\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.cover,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: classes.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(Avatar, {\n    alt: \"nhadatmoi.net\",\n    className: classes.avatar,\n    src: avatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }), __jsx(Grid, {\n    container: true,\n    spacing: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    xs: 8,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.titleFollow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, __jsx(Typography, {\n    component: \"h2\",\n    gutterBottom: true,\n    className: classes.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, _.get(props, \"channel.name\", \"\"), \" \", _.get(props, \"channel.official_status\", \"\") ? __jsx(CheckCircleIcon, {\n    style: {\n      color: \"#045EA8\",\n      fontSize: \"15px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }) : \"\"), __jsx(Typography, {\n    component: \"h3\",\n    variant: \"body2\",\n    className: classes.follow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, follow > 0 ? follow : 0, \" l\\u01B0\\u1EE3t theo d\\xF5i\"))), __jsx(Grid, {\n    item: true,\n    xs: 4,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.followStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, __jsx(Button, {\n    color: \"primary\",\n    onClick: () => addFollow(),\n    fullWidth: true,\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"Theo d\\xF5i\")), __jsx(\"div\", {\n    className: classes.followStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, __jsx(Button, {\n    color: \"primary\",\n    onClick: () => unfollow(),\n    fullWidth: true,\n    variant: \"contained\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"B\\u1ECF theo d\\xF5i\"))))));\n};\n\nexport default Header;","map":{"version":3,"sources":["C:/Users/manh nhan/Desktop/new_ndm/components/Channel/Header.tsx"],"names":["React","Avatar","Typography","Button","Grid","headerStyles","CheckCircleIcon","FOLLOW_CHANNEL","UNFOLLOW_CHANNEL","GET_AVERAGE_RATING","apolloClient","_","Header","props","classes","avatar","averageRating","setAverageRating","useState","follow_value","get","followValue","setFollowValue","addFollow","follow","mutate","mutation","variables","then","response","unfollow","getAverage","console","log","averrageRating","useEffect","cover","container","titleFollow","title","color","fontSize","followStyle"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Avatar, Typography, Button, Grid } from \"@material-ui/core\";\r\nimport StyledCheckbox from './StyledCheckbox'\r\nimport { headerStyles } from './Constant'\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport { FOLLOW_CHANNEL, UNFOLLOW_CHANNEL } from \"../../graphql/channel/mutation\"\r\nimport { GET_CHANNEL_BY_SLUG, GET_AVERAGE_RATING } from \"../../graphql/channel/queries\" \r\nimport { apolloClient } from \"../../utils\";\r\nimport _ from \"lodash\"\r\n\r\ninterface HearderProps {\r\n  userLogin: string\r\n  slug: string\r\n  channel: ChannelProp\r\n}\r\n\r\ninterface ChannelProp {\r\n  id: string\r\n  name: string\r\n  slug: string\r\n  avatar: string\r\n  cover: string\r\n  description: string\r\n  nation: string\r\n  language: string\r\n  telephone: string\r\n  address: string\r\n  facebook: string\r\n  youtube: string\r\n  website: string\r\n  official_status: number\r\n  follow_value: number\r\n  followers: {\r\n    user_id: string\r\n  }[]\r\n  created_at: string\r\n}\r\n\r\ninterface AverageRating {\r\n  count_rating: number\r\n  average_point: number\r\n  five_star: number\r\n  four_star: number\r\n  three_star: number\r\n  two_star: number\r\n  one_star: number\r\n}\r\n\r\nconst Header: React.FunctionComponent<HearderProps> = (props: HearderProps) => {\r\n  const classes = headerStyles();\r\n  const avatar = \"https://sf.co.ua/14/07/wallpaper-117233.jpg\"; // \"https://news.mogi.vn/wp-content/uploads/2018/08/anh-nha-dep-13.jpg\"\r\n  const [averageRating, setAverageRating] = React.useState()\r\n  let follow_value = _.get(props, \"channel.follow_value\", \"\");\r\n  let [followValue, setFollowValue] = React.useState(0);\r\n  \r\n  const addFollow = async ()=> { \r\n    let follow = await apolloClient.mutate({ mutation: FOLLOW_CHANNEL, variables: {\r\n      \"input\": {\r\n        \"id\": _.get(props, \"channel.id\", \"\")\r\n      }\r\n    }})\r\n    .then((response: any) => {\r\n      setFollowValue(follow_value + 1 )\r\n    })\r\n  };\r\n\r\n  const unfollow = async ()=> { \r\n    let follow = await apolloClient.mutate({ mutation: UNFOLLOW_CHANNEL, variables: {\r\n      \"input\": {\r\n        \"id\": _.get(props, \"channel.id\", \"\")\r\n      }\r\n    }})\r\n    .then((response: any) => {\r\n      setFollowValue(follow_value - 1)\r\n    })\r\n  };\r\n\r\n  const getAverage = async ()=> { \r\n    let follow = await apolloClient.mutate({ mutation: GET_AVERAGE_RATING, variables: {\r\n      \"id\": _.get(props, \"channel.id\", \"\")\r\n    }})\r\n    .then((response: any) => {\r\n      console.log(\"response\",response)\r\n      let averrageRating = _.get(response, \"data.channelAverageRatings\", \"\")\r\n      setAverageRating(averrageRating)\r\n    })\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    getAverage()\r\n  })\r\n\r\n  const follow = followValue || follow_value\r\n  return (\r\n    <div>\r\n      <div className={classes.cover}></div>\r\n      <div className={classes.container}>\r\n        <Avatar\r\n          alt=\"nhadatmoi.net\"\r\n          className={classes.avatar}\r\n          src={avatar}\r\n        />   \r\n        <Grid container spacing={0}>\r\n          <Grid item xs={8} sm={6}>\r\n            <div className={classes.titleFollow}>\r\n              <Typography component=\"h2\" gutterBottom className={classes.title}> \r\n                {_.get(props, \"channel.name\", \"\")} { _.get(props, \"channel.official_status\", \"\") ? <CheckCircleIcon style={{ color: \"#045EA8\", fontSize: \"15px\" }} /> : \"\"} \r\n              </Typography>\r\n              <Typography component=\"h3\" variant=\"body2\" className={classes.follow}>\r\n                {follow > 0 ? follow : 0} lượt theo dõi\r\n              </Typography>\r\n            </div>\r\n          </Grid>\r\n          <Grid item xs={4} sm={6}>\r\n            <div className={classes.followStyle}>\r\n              <Button color=\"primary\" onClick={() => addFollow()} fullWidth variant=\"outlined\">Theo dõi</Button>\r\n            </div>\r\n            <div className={classes.followStyle}>\r\n              <Button color=\"primary\" onClick={() => unfollow()} fullWidth variant=\"contained\">Bỏ theo dõi</Button>\r\n            </div>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"]},"metadata":{},"sourceType":"module"}