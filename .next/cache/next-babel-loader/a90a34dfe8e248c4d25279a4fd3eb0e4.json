{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"C:\\\\Users\\\\manh nhan\\\\Desktop\\\\new_ndm\\\\components\\\\GridList\\\\GridItemASL.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react'; // Material- UI\n\nimport Grid from \"@material-ui/core/Grid\"; // Icon\n\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport CalendarToday from \"@material-ui/icons/CalendarToday\";\nimport Moment from 'react-moment';\nimport Link from \"next/link\";\nimport { localStorageCompareKey } from \"../../constants\";\nimport Validator from \"../../modules/validator\";\nimport Tracking from \"../../modules/AdSellLease/Tracking\";\nimport validator from \"../../modules/validator\";\nimport { apolloClient } from '../../utils';\nimport { ADD_PROJECT_WISH_LIST } from '../../graphql/project/mutation';\nimport { ADD_AD_SELL_LEASE_WISH_LIST } from '../../graphql/ad_sell_leases/mutation';\n\nconst GridItemASL = props => {\n  const [dataCompareLocal, setDataCompareLocal] = React.useState(null);\n  const [likeStatus, setLikeStatus] = React.useState(props.dataGird.like_status);\n  const [statusCompare, setStatusCompare] = React.useState(false);\n  useEffect(() => {\n    if (localStorage.getItem(localStorageCompareKey) && !Validator.isBlank(localStorage.getItem(localStorageCompareKey))) {\n      try {\n        let dataStatusCompare = JSON.parse(localStorage.getItem(localStorageCompareKey));\n        setDataCompareLocal(dataStatusCompare);\n\n        for (let index in dataStatusCompare) {\n          let entityId = dataStatusCompare[index].id;\n\n          if (entityId === props.dataGird.id) {\n            setStatusCompare(true);\n          }\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, []);\n  let typeGrid = 'ad_sell_lease';\n\n  if (props.dataGird.path === '/du-an/') {\n    typeGrid = 'project';\n  }\n\n  const dataPrepare = {\n    avatar: props.dataGird.image,\n    title: props.dataGird.title,\n    id: props.dataGird.id,\n    type: typeGrid\n  };\n\n  const handleTracking = type => {\n    let addSellLeaseId = props.dataGird.id;\n\n    if (addSellLeaseId && !validator.isBlank(addSellLeaseId) && typeGrid === 'ad_sell_lease') {\n      Tracking.addTracking(String(addSellLeaseId), type);\n    }\n  };\n\n  let clickAddToCompare = () => {\n    handleTracking('compare_click');\n    let statusUpdate = updateCompareData(dataPrepare);\n    if (!statusUpdate) return statusUpdate;\n    location.reload();\n    return true;\n  };\n\n  const handleClickRemoveCompare = dataCompare => {\n    if (localStorage.getItem(localStorageCompareKey) && !Validator.isBlank(localStorage.getItem(localStorageCompareKey))) {\n      let dataToCompare = JSON.parse(localStorage.getItem(localStorageCompareKey));\n      let dataNewCompare = [];\n\n      for (let index in dataToCompare) {\n        if (dataToCompare[index].id !== dataCompare.id) {\n          dataNewCompare.push(dataToCompare[index]);\n        }\n      }\n\n      localStorage.setItem(localStorageCompareKey, _JSON$stringify(dataNewCompare));\n      location.reload();\n    }\n  };\n\n  let updateCompareData = data => {\n    let dataToCompare = [];\n    let isAddToLocal = true;\n\n    if (localStorage.getItem(localStorageCompareKey) && !Validator.isBlank(localStorage.getItem(localStorageCompareKey))) {\n      dataToCompare = JSON.parse(localStorage.getItem(localStorageCompareKey));\n\n      for (let index in dataToCompare) {\n        if (dataToCompare[index].id === data.id) {\n          isAddToLocal = false;\n        }\n\n        if (dataToCompare[index].type !== data.type) {\n          localStorage.removeItem(localStorageCompareKey);\n          dataToCompare = [];\n          break;\n        }\n      }\n    }\n\n    let screenWidth = screen.width;\n\n    if (dataToCompare && dataToCompare.length && dataToCompare.length >= 4 && screenWidth > 599) {\n      alert(\"Không thể so sánh quá 4 sản phẩm!\");\n      return false;\n    }\n\n    if (dataToCompare && dataToCompare.length && dataToCompare.length >= 2 && screenWidth <= 599) {\n      alert(\"Không thể so sánh quá 2 sản phẩm!\");\n      return false;\n    }\n\n    if (isAddToLocal) {\n      dataToCompare.push(data);\n      localStorage.setItem(localStorageCompareKey, _JSON$stringify(dataToCompare));\n    }\n\n    return true;\n  };\n\n  let linkHref = '';\n  let linkAs = '';\n\n  if (props.dataGird.path === '/du-an/') {\n    linkHref = '/du-an/[slug]';\n    linkAs = '/du-an/' + props.dataGird.slug;\n  } else {\n    linkHref = '/tin-rao/[slug]';\n    linkAs = '/tin-rao/' + props.dataGird.slug;\n  }\n\n  const handleClickLike = () => {\n    if (likeStatus) {\n      return false;\n    } else {\n      setLikeStatus(true);\n    }\n\n    if (props.dataGird.path !== '/du-an/') {\n      handleTracking('like');\n      apolloClient.mutate({\n        mutation: ADD_AD_SELL_LEASE_WISH_LIST,\n        variables: {\n          \"input\": {\n            \"ad_sell_lease_id\": props.dataGird.id,\n            \"status\": \"like\"\n          }\n        }\n      }).then(response => {});\n    } else {\n      apolloClient.mutate({\n        mutation: ADD_PROJECT_WISH_LIST,\n        variables: {\n          \"input\": {\n            \"project_id\": props.dataGird.id,\n            \"status\": \"like\"\n          }\n        }\n      }).then(response => {});\n    }\n  };\n\n  let componentsItem = __jsx(Grid, {\n    container: true,\n    direction: props.grid ? \"column\" : \"row\",\n    spacing: 0,\n    className: \"grid__list__item u-margin-bottom-small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: linkHref,\n    as: linkAs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"grid__list__item__img background block_float\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: 'grid__list__item__img__date',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, __jsx(CalendarToday, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }), __jsx(Moment, {\n    unix: true,\n    format: \"DD/MM/YYYY\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, Number(props.dataGird.created_at) / 1000)), __jsx(\"div\", {\n    className: 'grid__list__item__img__favorite',\n    onClick: handleClickLike,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, likeStatus && __jsx(FavoriteIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }), !likeStatus && __jsx(FavoriteBorderIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  })), props.dataGird.image && props.dataGird.image !== 'null' && props.dataGird.image !== '' && __jsx(\"img\", {\n    src: props.dataGird.image,\n    alt: props.dataGird.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }), (!props.dataGird.image || props.dataGird.image === 'null' || props.dataGird.image === '') && __jsx(\"img\", {\n    src: \"https://static.nhadatmoi.net/default/home_default.jpg\",\n    alt: props.dataGird.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }))))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, __jsx(Grid, {\n    className: \"grid__list__item__content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"grid__list__item__content__title u-flexSpaceBetween\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: linkHref,\n    as: linkAs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"grid__list__item__content__title__text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, props.dataGird.title))))), __jsx(\"div\", {\n    className: \"grid__list__item__content__description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, props.dataGird.address), props.dataGird.area && props.dataGird.area != \"0\" && __jsx(\"div\", {\n    className: \"grid__list__item__content__description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }, \"Di\\u1EC7n t\\xEDch: \", props.dataGird.area, \" m\", __jsx(\"sup\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, \"2\"), \" -  L\\u01B0\\u1EE3t xem: \", props.dataGird.view_count), (!props.dataGird.area || props.dataGird.area == \"0\") && __jsx(\"div\", {\n    className: \"grid__list__item__content__description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \"Di\\u1EC7n t\\xEDch: \\u0110ang c\\u1EADp nh\\u1EADt -  L\\u01B0\\u1EE3t xem: \", props.dataGird.view_count), __jsx(\"div\", {\n    className: \"grid__list__item__content__price\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  }, props.dataGird.price && props.dataGird.price !== '0' && props.dataGird.price !== '0 ' && props.dataGird.price !== '0 đồng' ? props.dataGird.price : 'Giá: Liên hệ'), !statusCompare && __jsx(\"div\", {\n    className: \"grid__list__item__content__compare\",\n    onClick: () => clickAddToCompare(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }, \"SO S\\xC1NH\"), statusCompare && __jsx(\"div\", {\n    className: \"grid__list__item__content__compare\",\n    onClick: () => handleClickRemoveCompare(dataPrepare),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247\n    },\n    __self: this\n  }, \"HU\\u1EF6\"))));\n\n  return __jsx(Grid, {\n    item: true,\n    xl: props.grid.xl,\n    lg: props.grid.lg,\n    md: props.grid.md,\n    sm: props.grid.sm,\n    xs: props.grid.xs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256\n    },\n    __self: this\n  }, componentsItem);\n};\n\nexport default GridItemASL;","map":{"version":3,"sources":["C:/Users/manh nhan/Desktop/new_ndm/components/GridList/GridItemASL.tsx"],"names":["React","useEffect","Grid","FavoriteBorderIcon","FavoriteIcon","CalendarToday","Moment","Link","localStorageCompareKey","Validator","Tracking","validator","apolloClient","ADD_PROJECT_WISH_LIST","ADD_AD_SELL_LEASE_WISH_LIST","GridItemASL","props","dataCompareLocal","setDataCompareLocal","useState","likeStatus","setLikeStatus","dataGird","like_status","statusCompare","setStatusCompare","localStorage","getItem","isBlank","dataStatusCompare","JSON","parse","index","entityId","id","error","console","log","typeGrid","path","dataPrepare","avatar","image","title","type","handleTracking","addSellLeaseId","addTracking","String","clickAddToCompare","statusUpdate","updateCompareData","location","reload","handleClickRemoveCompare","dataCompare","dataToCompare","dataNewCompare","push","setItem","data","isAddToLocal","removeItem","screenWidth","screen","width","length","alert","linkHref","linkAs","slug","handleClickLike","mutate","mutation","variables","then","response","componentsItem","grid","Number","created_at","address","area","view_count","price","xl","lg","md","sm","xs"],"mappings":"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","sourcesContent":["import React, {FunctionComponent, useEffect} from 'react';\r\n// Material- UI\r\nimport Grid from \"@material-ui/core/Grid\";\r\n// Icon\r\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\r\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\r\nimport CalendarToday from \"@material-ui/icons/CalendarToday\";\r\nimport StringProcess from \"../../modules/stringProcess\";\r\nimport Moment from 'react-moment';\r\nimport Link from \"next/link\";\r\nimport {localStorageCompareKey} from \"../../constants\";\r\nimport Validator from \"../../modules/validator\";\r\nimport Router from \"next/router\";\r\nimport Tracking from \"../../modules/AdSellLease/Tracking\";\r\nimport validator from \"../../modules/validator\";\r\nimport Button from '@material-ui/core/Button';\r\nimport {apolloClient} from '../../utils';\r\nimport {ADD_PROJECT_WISH_LIST} from '../../graphql/project/mutation';\r\nimport {ADD_AD_SELL_LEASE_WISH_LIST} from '../../graphql/ad_sell_leases/mutation';\r\n\r\ninterface dataGridProps {\r\n  image: any,\r\n  title: string,\r\n  area: string,\r\n  address: string,\r\n  price: string,\r\n  slug: string,\r\n  created_at: string,\r\n  updated_at: string,\r\n  path: string\r\n  view_count: number,\r\n  like_status: boolean,\r\n  id: string\r\n}\r\n\r\ninterface CompareDataProps {\r\n  avatar: string,\r\n  title: string,\r\n  id: string,\r\n  type: string\r\n}\r\n\r\ninterface GridItemProps {\r\n  grid: {\r\n    lg: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\r\n    md: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\r\n    sm: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\r\n    xs: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\r\n    xl: 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\r\n  };\r\n  dataGird: dataGridProps;\r\n}\r\n\r\nconst GridItemASL: FunctionComponent<GridItemProps> = (props: GridItemProps) =>\r\n{\r\n  const [dataCompareLocal, setDataCompareLocal] = React.useState(null);\r\n  const [likeStatus, setLikeStatus] = React.useState(props.dataGird.like_status);\r\n  const [statusCompare, setStatusCompare] = React.useState<boolean>(false);\r\n  useEffect(() => {\r\n    if (localStorage.getItem(localStorageCompareKey) && !Validator.isBlank(localStorage.getItem(localStorageCompareKey))) {\r\n      try {\r\n        let dataStatusCompare = JSON.parse(localStorage.getItem(localStorageCompareKey) as string);\r\n        setDataCompareLocal(dataStatusCompare);\r\n        for (let index in dataStatusCompare) {\r\n          let entityId = dataStatusCompare[index].id;\r\n          if (entityId === props.dataGird.id) {\r\n            setStatusCompare(true);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  let typeGrid = 'ad_sell_lease';\r\n  if (props.dataGird.path === '/du-an/') {\r\n    typeGrid = 'project';\r\n  }\r\n  const dataPrepare = {\r\n    avatar: props.dataGird.image,\r\n    title: props.dataGird.title,\r\n    id: props.dataGird.id,\r\n    type: typeGrid\r\n  };\r\n\r\n  const handleTracking = (type: string) => {\r\n    let addSellLeaseId = props.dataGird.id;\r\n    if (addSellLeaseId && !validator.isBlank(addSellLeaseId) && typeGrid === 'ad_sell_lease') {\r\n      Tracking.addTracking(String(addSellLeaseId), type);\r\n    }\r\n  };\r\n\r\n  let clickAddToCompare = () => {\r\n    handleTracking('compare_click');\r\n    let statusUpdate = updateCompareData(dataPrepare);\r\n    if (!statusUpdate) return statusUpdate;\r\n    location.reload();\r\n    return true;\r\n  };\r\n\r\n  const handleClickRemoveCompare = (dataCompare: CompareDataProps) => {\r\n    if (localStorage.getItem(localStorageCompareKey) && !Validator.isBlank(localStorage.getItem(localStorageCompareKey))) {\r\n      let dataToCompare = JSON.parse(localStorage.getItem(localStorageCompareKey) as string);\r\n      let dataNewCompare = [];\r\n      for (let index in dataToCompare) {\r\n        if (dataToCompare[index].id !== dataCompare.id) {\r\n          dataNewCompare.push(dataToCompare[index])\r\n        }\r\n      }\r\n      localStorage.setItem(localStorageCompareKey, JSON.stringify(dataNewCompare));\r\n      location.reload();\r\n    }\r\n  };\r\n\r\n  let updateCompareData = (data: CompareDataProps) => {\r\n    let dataToCompare = [];\r\n    let isAddToLocal = true;\r\n    if (localStorage.getItem(localStorageCompareKey) && !Validator.isBlank(localStorage.getItem(localStorageCompareKey))) {\r\n      dataToCompare = JSON.parse(localStorage.getItem(localStorageCompareKey) as string);\r\n      for (let index in dataToCompare) {\r\n        if (dataToCompare[index].id === data.id) {\r\n          isAddToLocal = false;\r\n        }\r\n        if (dataToCompare[index].type !== data.type) {\r\n          localStorage.removeItem(localStorageCompareKey);\r\n          dataToCompare = [];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    let screenWidth = screen.width;\r\n    if (dataToCompare && dataToCompare.length && dataToCompare.length >= 4 && screenWidth > 599) {\r\n      alert(\"Không thể so sánh quá 4 sản phẩm!\");\r\n      return false;\r\n    }\r\n    if (dataToCompare && dataToCompare.length && dataToCompare.length >= 2 && screenWidth <= 599) {\r\n      alert(\"Không thể so sánh quá 2 sản phẩm!\");\r\n      return false;\r\n    }\r\n    if (isAddToLocal) {\r\n      dataToCompare.push(data);\r\n      localStorage.setItem(localStorageCompareKey, JSON.stringify(dataToCompare));\r\n    }\r\n    return true;\r\n  };\r\n\r\n  let linkHref = '';\r\n  let linkAs = '';\r\n  if (props.dataGird.path === '/du-an/') {\r\n    linkHref = '/du-an/[slug]';\r\n    linkAs = '/du-an/' + props.dataGird.slug;\r\n  } else {\r\n    linkHref = '/tin-rao/[slug]';\r\n    linkAs = '/tin-rao/' + props.dataGird.slug;\r\n  }\r\n\r\n  const handleClickLike = () => {\r\n    if (likeStatus) {\r\n      return false;\r\n    } else {\r\n      setLikeStatus(true);\r\n    }\r\n    if (props.dataGird.path !== '/du-an/') {\r\n      handleTracking('like');\r\n      apolloClient.mutate({mutation: ADD_AD_SELL_LEASE_WISH_LIST, variables: {\r\n          \"input\" : {\r\n            \"ad_sell_lease_id\": props.dataGird.id,\r\n            \"status\": \"like\"\r\n          }\r\n        }}).then((response: any) => {\r\n      });\r\n    } else {\r\n      apolloClient.mutate({mutation: ADD_PROJECT_WISH_LIST, variables: {\r\n          \"input\": {\r\n            \"project_id\": props.dataGird.id,\r\n            \"status\": \"like\"\r\n          }\r\n        }}).then((response: any) => {\r\n      });\r\n    }\r\n  };\r\n\r\n  let componentsItem = (\r\n    <Grid container direction={props.grid ? \"column\" : \"row\"} spacing={0}\r\n          className=\"grid__list__item u-margin-bottom-small\">\r\n      <Grid item xs={12}>\r\n        <Link href={linkHref} as={linkAs}><a>\r\n          <div className=\"grid__list__item__img background block_float\">\r\n            <div className={'grid__list__item__img__date'}><CalendarToday/><Moment unix format=\"DD/MM/YYYY\">\r\n              {Number(props.dataGird.created_at)/1000}</Moment></div>\r\n\r\n            <div className={'grid__list__item__img__favorite'} onClick={handleClickLike}>\r\n              {\r\n                likeStatus &&\r\n                <FavoriteIcon/>\r\n              }\r\n              {\r\n                !likeStatus &&\r\n                <FavoriteBorderIcon/>\r\n              }\r\n            </div>\r\n            {\r\n              props.dataGird.image && props.dataGird.image !== 'null' && props.dataGird.image !== '' &&\r\n              <img src={props.dataGird.image} alt={props.dataGird.title}/>\r\n            }\r\n            {\r\n              (!props.dataGird.image || props.dataGird.image === 'null' || props.dataGird.image === '') &&\r\n              <img src=\"https://static.nhadatmoi.net/default/home_default.jpg\" alt={props.dataGird.title}/>\r\n            }\r\n          </div>\r\n        </a></Link>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Grid className=\"grid__list__item__content\">\r\n          <div className=\"grid__list__item__content__title u-flexSpaceBetween\">\r\n            <Link href={linkHref} as={linkAs}><a>\r\n              <div className=\"grid__list__item__content__title__text\">\r\n                <p>{props.dataGird.title}</p>\r\n              </div>\r\n            </a></Link>\r\n          </div>\r\n          <div className=\"grid__list__item__content__description\">\r\n            {props.dataGird.address}\r\n          </div>\r\n          {\r\n            props.dataGird.area && props.dataGird.area != \"0\" &&\r\n            <div className=\"grid__list__item__content__description\">\r\n              Diện tích: {props.dataGird.area} m<sup>2</sup> -  Lượt xem: {props.dataGird.view_count}\r\n            </div>\r\n          }\r\n          {\r\n            (!props.dataGird.area || props.dataGird.area == \"0\") &&\r\n            <div className=\"grid__list__item__content__description\">\r\n              Diện tích: Đang cập nhật -  Lượt xem: {props.dataGird.view_count}\r\n            </div>\r\n          }\r\n          <div className=\"grid__list__item__content__price\">{(props.dataGird.price && props.dataGird.price !== '0' && props.dataGird.price !== '0 ' && props.dataGird.price !== '0 đồng')?props.dataGird.price:'Giá: Liên hệ'}</div>\r\n          {\r\n            !statusCompare &&\r\n            <div className=\"grid__list__item__content__compare\" onClick={() => clickAddToCompare()}>\r\n              SO SÁNH\r\n            </div>\r\n          }\r\n          {\r\n            statusCompare &&\r\n            <div className=\"grid__list__item__content__compare\" onClick={() => handleClickRemoveCompare(dataPrepare)}>\r\n              HUỶ\r\n            </div>\r\n          }\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n  return (\r\n    <Grid\r\n      item\r\n      xl={props.grid.xl}\r\n      lg={props.grid.lg}\r\n      md={props.grid.md}\r\n      sm={props.grid.sm}\r\n      xs={props.grid.xs}\r\n    >\r\n      {componentsItem}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default GridItemASL;\r\n"]},"metadata":{},"sourceType":"module"}