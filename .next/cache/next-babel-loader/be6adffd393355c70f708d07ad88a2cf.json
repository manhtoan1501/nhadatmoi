{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nvar _jsxFileName = \"C:\\\\Users\\\\manh nhan\\\\Desktop\\\\Nhadatmoi\\\\pages\\\\_app.tsx\";\nvar __jsx = React.createElement;\nimport App from 'next/app';\nimport Url from 'url';\nimport React from 'react';\nimport nextCookie from \"next-cookies\";\nimport Router from \"next/router\";\nimport withGA from \"next-ga\";\nimport { googleAnalyticsCode } from '../constants';\nimport ErrorPage from \"next/error\";\nimport Validator from \"../modules/validator\";\nconst projectDetailPathname = '/chi-tiet-du-an.aspx';\nconst newLandDetailPathname = '/newland/project_detail.aspx';\nconst newLandAdSellLeasePathname = '/newland/properties_detail.aspx';\nconst adSellLeaseDetailPathname = '/chi-tiet-tin-rao.aspx';\nconst projectDetailNew = '/du-an/';\nconst adSellLeaseDetailNew = '/tin-rao/';\nconst projectCategory = '/du-an.aspx';\nconst adSellLeaseCategory = '/tin-rao.aspx';\n\nclass MyApp extends App {\n  static async getInitialProps({\n    Component,\n    ctx\n  }) {\n    if (ctx.asPath) {\n      let urlObject = Url.parse(ctx.asPath);\n      let pathName = urlObject.pathname;\n      let queryString = urlObject.query; // if (pathName === '/tin-rao' || pathName === '/tin-rao/' || pathName === '/nha-dat-ban/') {\n      //   console.log(\"chay voa tin giao\")\n      //   let urlRedirect = '/nha-dat-ban';\n      //   ctx.res.writeHead(301, {\n      //     Location: `${urlRedirect}`\n      //   });\n      //   ctx.res.end();\n      // }\n      // if (pathName === '/du-an' || pathName === '/du-an/' || pathName === '/du-an-bat-dong-san/') {\n      //   console.log(\"chay vao du an\")\n      //   let urlRedirect = '/du-an-bat-dong-san';\n      //   ctx.res.writeHead(301, {\n      //     Location: `${urlRedirect}`\n      //   });\n      //   ctx.res.end();\n      // }\n\n      if (queryString && (pathName === projectDetailPathname || pathName === newLandDetailPathname)) {\n        let urlRedirect = '/';\n        console.log(\"chay vao hehe 1\");\n\n        if (queryString.indexOf('project_id=') === -1) {\n          queryString = queryString.replace('.html', '');\n          urlRedirect = projectDetailNew + queryString;\n        }\n\n        ctx.res.writeHead(301, {\n          Location: `${urlRedirect}`\n        });\n        ctx.res.end();\n      }\n\n      if (queryString && (pathName === adSellLeaseDetailPathname || pathName === newLandAdSellLeasePathname)) {\n        let urlRedirect = '/';\n        console.log(\"chay vao hehe 2\");\n\n        if (queryString.indexOf('ad_sell_lease_id=') === -1) {\n          queryString = queryString.replace('.html', '');\n          urlRedirect = adSellLeaseDetailNew + queryString;\n        }\n\n        ctx.res.writeHead(301, {\n          Location: `${urlRedirect}`\n        });\n        ctx.res.end();\n      } // if (pathName === projectCategory) {\n      //   console.log(\"chay vao du an 2\")\n      //   let urlRedirect = '/du-an';\n      //   ctx.res.writeHead(301, {\n      //     Location: `${urlRedirect}`\n      //   });\n      //   ctx.res.end();\n      // }\n      // if (pathName === adSellLeaseCategory) {\n      //   console.log(\"chay vao tin rao 2\")\n      //   let urlRedirect = '/tin-rao';\n      //   ctx.res.writeHead(301, {\n      //     Location: `${urlRedirect}`\n      //   });\n      //   ctx.res.end();\n      // }\n\n    }\n\n    let pageProps = {\n      statusCode: 200\n    };\n\n    if (Component.getInitialProps) {\n      pageProps = await Component.getInitialProps(ctx);\n    }\n\n    let {\n      user\n    } = nextCookie(ctx);\n    pageProps = _Object$assign(pageProps, {\n      user: user\n    });\n    return {\n      pageProps\n    };\n  }\n\n  render() {\n    let arraySearch = \"new\";\n    localStorage.setItem(\"dataSearch\", _JSON$stringify(arraySearch));\n    const {\n      Component,\n      pageProps\n    } = this.props;\n\n    if (!Validator.isBlank(pageProps.statusCode) && pageProps.statusCode !== 200) {\n      return __jsx(ErrorPage, {\n        statusCode: pageProps.statusCode,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      });\n    }\n\n    return __jsx(React.Fragment, null, __jsx(Component, _extends({}, pageProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withGA(googleAnalyticsCode, Router)(MyApp);","map":{"version":3,"sources":["C:/Users/manh nhan/Desktop/Nhadatmoi/pages/_app.tsx"],"names":["App","Url","React","nextCookie","Router","withGA","googleAnalyticsCode","ErrorPage","Validator","projectDetailPathname","newLandDetailPathname","newLandAdSellLeasePathname","adSellLeaseDetailPathname","projectDetailNew","adSellLeaseDetailNew","projectCategory","adSellLeaseCategory","MyApp","getInitialProps","Component","ctx","asPath","urlObject","parse","pathName","pathname","queryString","query","urlRedirect","console","log","indexOf","replace","res","writeHead","Location","end","pageProps","statusCode","user","render","arraySearch","localStorage","setItem","props","isBlank"],"mappings":"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","sourcesContent":["import App from 'next/app';\r\nimport Url from 'url';\r\nimport React from 'react'\r\nimport nextCookie from \"next-cookies\";\r\nimport Router from \"next/router\";\r\nimport withGA from \"next-ga\";\r\nimport {googleAnalyticsCode} from '../constants';\r\nimport ErrorPage from \"next/error\";\r\nimport Validator from \"../modules/validator\";\r\n\r\nconst projectDetailPathname = '/chi-tiet-du-an.aspx';\r\nconst newLandDetailPathname = '/newland/project_detail.aspx';\r\nconst newLandAdSellLeasePathname = '/newland/properties_detail.aspx';\r\nconst adSellLeaseDetailPathname = '/chi-tiet-tin-rao.aspx';\r\nconst projectDetailNew = '/du-an/';\r\nconst adSellLeaseDetailNew = '/tin-rao/';\r\nconst projectCategory = '/du-an.aspx';\r\nconst adSellLeaseCategory = '/tin-rao.aspx';\r\n\r\nclass MyApp extends App {\r\n  static async getInitialProps({Component, ctx}: any) {\r\n    if (ctx.asPath) {\r\n      let urlObject = Url.parse(ctx.asPath);\r\n      let pathName = urlObject.pathname;\r\n      let queryString = urlObject.query;\r\n      // if (pathName === '/tin-rao' || pathName === '/tin-rao/' || pathName === '/nha-dat-ban/') {\r\n      //   console.log(\"chay voa tin giao\")\r\n      //   let urlRedirect = '/nha-dat-ban';\r\n      //   ctx.res.writeHead(301, {\r\n      //     Location: `${urlRedirect}`\r\n      //   });\r\n      //   ctx.res.end();\r\n      // }\r\n      // if (pathName === '/du-an' || pathName === '/du-an/' || pathName === '/du-an-bat-dong-san/') {\r\n      //   console.log(\"chay vao du an\")\r\n      //   let urlRedirect = '/du-an-bat-dong-san';\r\n      //   ctx.res.writeHead(301, {\r\n      //     Location: `${urlRedirect}`\r\n      //   });\r\n      //   ctx.res.end();\r\n      // }\r\n\r\n      if (queryString && (pathName === projectDetailPathname || pathName === newLandDetailPathname)) {\r\n        let urlRedirect = '/';\r\n        console.log(\"chay vao hehe 1\")\r\n        if (queryString.indexOf('project_id=') === -1) {\r\n          queryString = queryString.replace('.html','');\r\n          urlRedirect = projectDetailNew + queryString;\r\n        }\r\n\r\n        ctx.res.writeHead(301, {\r\n          Location: `${urlRedirect}`\r\n        });\r\n        ctx.res.end();\r\n      }\r\n      if (queryString && (pathName === adSellLeaseDetailPathname || pathName === newLandAdSellLeasePathname)) {\r\n        let urlRedirect = '/';\r\n        console.log(\"chay vao hehe 2\")\r\n        if (queryString.indexOf('ad_sell_lease_id=') === -1) {\r\n          queryString = queryString.replace('.html','');\r\n          urlRedirect = adSellLeaseDetailNew + queryString;\r\n        }\r\n\r\n        ctx.res.writeHead(301, {\r\n          Location: `${urlRedirect}`\r\n        });\r\n        ctx.res.end();\r\n      }\r\n      \r\n      // if (pathName === projectCategory) {\r\n      //   console.log(\"chay vao du an 2\")\r\n      //   let urlRedirect = '/du-an';\r\n      //   ctx.res.writeHead(301, {\r\n      //     Location: `${urlRedirect}`\r\n      //   });\r\n      //   ctx.res.end();\r\n      // }\r\n      // if (pathName === adSellLeaseCategory) {\r\n      //   console.log(\"chay vao tin rao 2\")\r\n      //   let urlRedirect = '/tin-rao';\r\n      //   ctx.res.writeHead(301, {\r\n      //     Location: `${urlRedirect}`\r\n      //   });\r\n      //   ctx.res.end();\r\n      // }\r\n    }\r\n\r\n    let pageProps = {\r\n      statusCode: 200\r\n    };\r\n    if (Component.getInitialProps) {\r\n      pageProps = await Component.getInitialProps(ctx);\r\n    }\r\n    let {user} = nextCookie(ctx);\r\n    pageProps = Object.assign(pageProps,{user: user});\r\n    return { pageProps }\r\n  }\r\n\r\n  render() {\r\n    let arraySearch = \"new\"\r\n    localStorage.setItem(\"dataSearch\", JSON.stringify(arraySearch))\r\n    const { Component, pageProps} = this.props;\r\n    if (!Validator.isBlank(pageProps.statusCode) && pageProps.statusCode !== 200) {\r\n      return <ErrorPage statusCode={pageProps.statusCode}/>;\r\n    }\r\n    return (\r\n      <>\r\n        <Component {...pageProps}/>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withGA(googleAnalyticsCode, Router)(MyApp);\r\n\r\n"]},"metadata":{},"sourceType":"module"}